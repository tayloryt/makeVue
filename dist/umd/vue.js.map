{"version":3,"file":"vue.js","sources":["../../src/utils/index.js","../../src/observe/observeArray.js","../../src/observe/dep.js","../../src/observe/index.js","../../src/state.js","../../src/complier/parser-html.js","../../src/complier/generate.js","../../src/complier/index.js","../../src/utils/next-tick.js","../../src/observe/schedular.js","../../src/observe/watcher.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/create-element.js","../../src/render.js","../../src/initOptionsAPI/initMixin.js","../../src/utils/const.js","../../src/initOptionsAPI/assets.js","../../src/initOptionsAPI/extend.js","../../src/initOptionsAPI/index.js","../../src/index.js"],"sourcesContent":["//判断是否数组\nexport function isObject(data) {\n    return typeof data === 'object' && data !== null\n}\nexport function def(data, key, value) {\n    Object.defineProperty(data, key, {\n        enumerable: false,\n        configurable: false,\n        value\n    })\n}\nexport function proxy(vm, source, key) {\n    Object.defineProperty(vm, key, {\n        get() {\n            return vm[source][key]\n        },\n        set(newVal) {\n            vm[source][key] = newVal\n        }\n    })\n}\nfunction mergeHook(parentVal, childVal) {\n    if (childVal) {\n        if (parentVal) {\n            return parentVal.concat(childVal)\n        } else {\n            return [childVal]\n        }\n    } else {\n        return [parentVal]\n    }\n}\nconst LIFECYCLE_HOOKS = ['beforeCreate', 'created', 'beforeMount', 'Mounted', 'beforeUpdate', 'updated', 'beforeDestroy', 'destroyed']\nlet strats = {}\nLIFECYCLE_HOOKS.forEach(hook => {\n    strats[hook] = mergeHook\n})\nstrats.components = mergeAssets\nfunction mergeAssets(parentVal,childVal) {\n    let res = Object.create(parentVal)\n    if (childVal) {\n        for (let key in childVal) {\n            res[key] = childVal[key]\n        }\n    }\n    return res\n}\nexport function mergeOptions(parent, child) {\n    const options = {}\n    for (let key in parent) {\n        merge(key)\n    }\n    for (let key in child) {\n        merge(key)\n    }\n    function merge(key) {\n        if (strats[key]) {\n            return options[key] = strats[key](parent[key], child[key])\n        }\n        if (typeof parent[key] === 'object' && typeof child[key] === 'object') {\n            options[key] = {\n                ...parent[key],\n                ...child[key]\n            }\n        } else if (child[key] === undefined) {\n            options[key] = parent[key]\n        } else {\n            options[key] = child[key]\n        }\n    }\n    return options\n}\nexport function isRealTag(tagName) {\n    const tagConfig = ['div', 'a', 'input', 'p', 'span', 'main', 'textarea','li','ul']\n    return tagConfig.includes(tagName)\n}\n","let oldArrayPrototype = Array.prototype;\nexport let arrayMethods = Object.create(oldArrayPrototype)\nconst METHODS = [\n    'push',\n    'splice',\n    'unshift',\n    'pop',\n    'shift',\n    'reverse',\n    'sort'\n]\nMETHODS.forEach(method => {\n    arrayMethods[method] = function (...args) {\n       const result = oldArrayPrototype[method].call(this, ...args);\n        let insertData;\n        let ob = this.__ob__\n        switch (method) {\n            case 'push':\n            case 'unshift':\n                insertData = args\n                break;\n            case 'splice':\n                insertData = args.slice(2)\n                break;\n        }\n   \n        if(insertData) ob.observeArray(insertData)\n        ob.dep.notify()\n        return result\n    }\n})","let id = 0;\nexport class Dep{\n    constructor() {\n        this.id = id++\n        this.subs = []\n    }\n    addSub(watcher){\n         this.subs.push(watcher)\n    }\n    depend() {\n        Dep.target.addDep(this)\n    }\n    notify() {\n        this.subs.forEach(watcher=>watcher.update())\n    }\n}\nlet stack = []\nexport function pushTarget(watcher) {\n    Dep.target = watcher;\n    stack.push(watcher)\n}\nexport function popTarget() {\n    stack.pop()\n    Dep.target = stack[stack.length - 1]\n}","/**\n * 观测数据\n * @param {*}data \n */\nimport { isObject, def } from '../utils/index'\nimport { arrayMethods } from './observeArray'\nimport { Dep } from './dep'\nclass Observe {\n    constructor(value) {\n        if (Array.isArray(value)) {\n            this.dep = new Dep\n            def(value, '__ob__', this)\n            value.__proto__ = arrayMethods\n            this.observeArray(value)\n        } else {\n            this.walk(value)\n        }\n\n    }\n    observeArray(value) {\n        for (let i = 0; i < value.length; i++) {\n            observe(value[i])\n        }\n    }\n    walk(value) {\n        Object.keys(value).forEach(key => {\n            defineReactive(value, key, value[key])\n        })\n    }\n}\nfunction defineReactive(data, key, value) {\n   let childOB = observe(value)\n    const dep = new Dep()\n    Object.defineProperty(data, key, {\n        get() {\n            // console.log('取值', value)\n            if (Dep.target) {\n                dep.depend()\n                if(childOB){\n                    childOB.dep.depend()\n                    if(Array.isArray(value)){\n                        arrayDep(value)\n                    }\n                }\n            }\n            return value\n        },\n        set(newValue) {\n            if (newValue === value) return;\n            observe(newValue)\n            value = newValue\n            dep.notify()\n        }\n    })\n}\nfunction arrayDep(value){\n    for(let i = 0;i<value.length;i++){\n        let current = value[i]\n        current.__ob__ && current.__ob__.dep.depend()\n        if(Array.isArray(current)){\n            arrayDep(current)\n        }\n    }\n}\nexport function observe(data) {\n    if (!isObject(data)) return\n    return new Observe(data)\n}","import { observe } from './observe/index'\nimport {proxy} from './utils/index'\nexport function initState(vm) {\n    if (vm.$options.props) {\n        initProps(vm)\n    }\n    if (vm.$options.methods) {\n        initMethods(vm)\n    }\n    if (vm.$options.data) {\n        initData(vm)\n    }\n    if (vm.$options.computed) {\n        initComputed(vm)\n    }\n    if (vm.$options.watch) {\n        initWatch(vm)\n    }\n}\nfunction initProps(vm) {\n\n}\nfunction initMethods(vm) {\n\n}\nfunction initData(vm) {\n    let data = vm.$options.data;\n    data = vm._data = typeof data === 'function' ? data.call(vm) : data\n    for (let key in data) {\n        proxy(vm,'_data',key)\n    }\n    observe(data)\n}\nfunction initComputed(vm) { }\nfunction initWatch(vm) { }\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\nconst startTagClose = /^\\s*(\\/?)>/;\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\nlet root = null;\nconst stack = [];\nconst TAG_TYPE = 1;\nconst TEXT_TYPE = 3;\nlet currentParent;\nfunction createAstElement(tagName, attrs) {\n    return {\n        tag: tagName,\n        parent: null,\n        children: [],\n        attrs,\n        nodeType: TAG_TYPE\n    }\n}\nfunction end(tagName) {\n    let element = stack.pop()\n    if (element.tag !== tagName) {\n        throw new Error('html error')\n    }\n    currentParent = stack[stack.length - 1]\n    if (currentParent) {\n        currentParent.children.push(element)\n        element.parent = currentParent.tag\n    }\n}\nfunction chars(text) {\n    text = text.replace(/\\s/g, '')\n    let element = {\n        nodeType: TEXT_TYPE,\n        text\n    }\n    if (text && currentParent) {\n        currentParent.children.push(element)\n    }\n}\nfunction start(tagName, attrs) {\n    const element = createAstElement(tagName, attrs)\n    if (!root) {\n        root = element\n    }\n    currentParent = element\n    stack.push(element)\n}\nexport function parseHtml(html) {\n    while (html) {\n        let textEnd = html.indexOf('<')\n        if (textEnd === 0) {\n            let startTagMatch = parseStartTag()\n            if (startTagMatch) {\n                start(startTagMatch.tagName, startTagMatch.attrs)\n                continue\n            }\n            let endTagMatch = html.match(endTag)\n            if (endTagMatch) {\n                advance(endTagMatch[0].length)\n                end(endTagMatch[1])\n                continue\n            }\n        }\n        let text;\n        if (textEnd >= 0) {\n            text = html.substring(0, textEnd)\n        }\n        if (text) {\n            advance(text.length)\n            chars(text)\n        }\n    }\n    function advance(n) {\n        html = html.substring(n)\n    }\n    function parseStartTag() {\n        let start = html.match(startTagOpen);\n        if (start) {\n            const match = {\n                tagName: start[1],\n                attrs: []\n            }\n            advance(start[0].length)\n\n            let end, attr;\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n                match.attrs.push({\n                    name: attr[1],\n                    value: attr[3] || attr[4] || attr[5]\n                })\n                advance(attr[0].length)\n            }\n            if (end) {\n                advance(end[0].length)\n            }\n            return match\n        }\n    }\n    return root\n}","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\nfunction genProps(attrs) {\n    let str = '';\n    for (let i = 0; i < attrs.length; i++){\n        if (attrs[i].name === 'style') {\n            let obj = {};\n            attrs[i].value.split(';').forEach(item=>{\n                let [key, value] = item.split(':');\n                let styleName;\n                if (key.includes('-')) {\n                    const [classKey,name] = key.split('-')\n                    let replaceKey = name.substring(0, 1).toLocaleUpperCase()\n                    styleName = classKey + replaceKey+name.slice(1)\n                } else {\n                    styleName = key\n                }\n                obj[styleName] = value\n            });\n            attrs[i].value  = obj\n        } \n        str +=`${attrs[i].name}:${JSON.stringify(attrs[i].value)},`   \n    }\n   return `{${str.slice(0,-1)}}`\n}\nfunction genChildren(el) {\n    let children = el.children\n    if (children && children.length) {\n       return `${children.map(c => \n            gen(c)\n        ).join(',')}`\n    } else {\n        return false\n    }\n}\nexport function generate(el) {\n    return `_c(\"${el.tag}\",${el.attrs.length?genProps(el.attrs):'undefined'},${genChildren(el)})`\n}\nfunction gen(el) {\n    if (el.nodeType === 1) {\n       return generate(el)\n    } else {\n        let lastIndex = defaultTagRE.lastIndex = 0\n        let tokens = []\n        let match, index;\n        let text = el.text\n        while (match = defaultTagRE.exec(text)) {\n             index = match.index;\n            if (index > lastIndex) {\n                tokens.push(JSON.stringify(text.slice(lastIndex,index)))\n            }\n            tokens.push(`_s(${match[1].trim()})`)\n            lastIndex = index + match[0].length\n        }\n        if (lastIndex<text.length) {\n            tokens.push(JSON.stringify(text.slice(lastIndex)))\n        }\n        return `_v(${tokens.join('+')})`\n   }\n}","import { parseHtml } from './parser-html'\nimport {generate} from './generate'\nexport function compilationToRender(template) {\n    let root = parseHtml(template)\n    let renderData = generate(root)\n    let renderFn = new Function(`with(this){return ${renderData}}`)\n    return renderFn\n}","const callTicks = []\nlet waiting = false\nfunction flushQueue(){\n    callTicks.forEach(cb=>cb())\n    waiting = false\n}\nexport function nextTick(cb){\n    callTicks.push(cb)\n    if(!waiting){\n        setTimeout(flushQueue,0);\n        waiting = true\n    }\n}","import { nextTick } from '../utils/next-tick'\nlet queue = [];\nlet has = {};\nfunction flushQueue() {\n    queue.forEach(item => item.run())\n    has = {}\n    queue.length = 0;\n}\nexport function queueWatcher(watcher) {\n    const id = watcher.id;\n    if (has[id] === undefined) {\n        queue.push(watcher);\n        has[id] = true;\n        nextTick(flushQueue)\n    }\n}","import {pushTarget,popTarget} from './dep'\nimport {queueWatcher} from './schedular'\nlet id = 0;\nclass Watcher{\n    constructor(vm,getter,cb,options) {\n        this.vm = vm;\n        this.getter = getter;\n        this.cb = cb;\n        this.id = id++\n        this.options = options\n        this.depIds = new Set()\n        this.deps = []\n        this.get();   \n    }\n    addDep(Dep){\n        let id = Dep.id\n        if(!this.depIds.has(id)){\n            this.depIds.add(id)\n            this.deps.push(Dep)\n            console.log(id,'watcher')\n            Dep.addSub(this)\n        }\n    }\n    get() {\n        pushTarget(this)\n        this.getter()\n        popTarget()\n    }\n    update() {\n        queueWatcher(this)\n    }\n    run(){\n        this.get()\n    }\n}\n\nexport default Watcher","export function patch(oldVnode,vnode) {\n    const isRealNode = oldVnode.nodeType\n    if (isRealNode) {\n        const oldElm = oldVnode;\n        const parentElm = oldVnode.parentNode;\n        let el = createElm(vnode);\n        parentElm.insertBefore(el, oldElm.nextSibling)\n        parentElm.removeChild(oldElm)\n        return el\n    }\n}\nfunction createElm(vnode){\n    let { tag, data, children, key, text } = vnode\n    if (typeof tag === 'string') {\n        vnode.el = document.createElement(tag);\n        console.log(vnode.el)\n        updateProperties(vnode)\n        if (children) {\n            children.forEach(child => {\n                return vnode.el.appendChild(createElm(child))\n            });\n        }\n       \n    } else {\n        //虚拟dom映射真实dom\n       vnode.el = document.createTextNode(text)\n    }\n    return vnode.el;\n}\nfunction updateProperties(vnode) {\n    let propsData = vnode.data;\n    let el = vnode.el;\n    for (let key in propsData) {\n        if (key === 'class') {\n            el.className = propsData[key]\n        } else if (key === 'style') {\n            for (let styleName in propsData[key]) {\n                el.style[styleName] = propsData[key][styleName]\n            }\n        } else {\n            el.setAttribute(key,propsData[key])\n        }\n    }\n}\n","import Watcher from './observe/watcher'\nimport {patch} from './vdom/patch'\nexport function mountComponent(vm, el) {\n    const options = vm.$options;\n    vm.$el = el;\n    callHook(vm,'beforeMount')\n    let updateComponent = () => {\n        console.log('update')\n        vm._update(vm._render())\n    }\n    new Watcher(vm, updateComponent, () => { }, true)\n    callHook(vm,'mounted')\n}\nexport function lifecycleMixin(Vue) {\n    Vue.prototype._update = function (vnode) {\n        const vm = this;\n        vm.$el = patch(vm.$el,vnode)//虚拟节点创建出真实节点替换掉原有$el\n    }\n}\nexport function callHook(vm,hook) {\n    const handlers = vm.$options[hook];\n    if (handlers) {\n        for (let i = 0; i < handlers.length; i++){\n            handlers[i].call(vm)\n        }\n    }\n}","import { initState } from './state'\nimport { compilationToRender } from './complier/index'\nimport { mountComponent,callHook } from './lifecycle.js'\nimport {mergeOptions} from './utils/index'\nimport {nextTick} from './utils/next-tick'\nexport function initMixin(Vue) {\n    Vue.prototype._init = function (options) {\n        const vm = this\n        vm.$options = mergeOptions(vm.constructor.options, options)\n        callHook(vm,'beforeCreate')\n        initState(vm)\n        callHook(vm,'created')\n    }\n    Vue.prototype.$mount = function (el) {\n        const vm = this;\n        const options = vm.$options;\n        el = document.querySelector(el)\n        if (!options.render) {\n            let template = options.template\n            if (!template && el) {\n                template = el.outerHTML;\n                let render = compilationToRender(template)\n                options.render = render\n            }\n        }\n        mountComponent(vm,el)\n    }\n    Vue.prototype.$nextTick = nextTick\n}","import {isRealTag, isObject} from '../utils/index'\nexport function createElement(vm, tag, data = {}, ...children) {\n    let key = data.key\n    if (key) {\n        delete data.key\n    }\n    if (isRealTag(tag)) {\n        return vNode(tag,data,key,children,undefined)\n    } else {\n        console.log(tag)\n        let Ctor = vm.$options.components[tag]\n        return createComponent(vm,tag,data,key,children,Ctor)\n    }\n    \n}\nexport function createComponent(vm, tag, data,key,children, Ctor) {\n    if (isObject(Ctor)) {\n        Ctor = vm.$options._base.extend(Ctor)\n    }\n    console.log(Ctor)\n    return vNode(`vue-component-${Ctor.id}-${tag}`,data,key,undefined,undefined,{Ctor,children})\n}\nexport function createTextNode(text) {\n    return vNode(undefined,undefined,undefined,undefined,text)\n}\nfunction vNode(tag,data,key,children,text,componentOptions) {\n    return {\n        tag,\n        data,\n        key,\n        children,\n        text,\n        componentOptions\n    }\n}","import {createElement,createTextNode} from './vdom/create-element'\nexport function renderMixin(Vue) {\n    Vue.prototype._c = function () {\n        return createElement(this,...arguments)\n    }\n    Vue.prototype._v = function (text) {\n        return createTextNode(text)\n    }\n    Vue.prototype._s = function (val) {\n        return val === null?'':(typeof val === 'object'?JSON.stringify(val):val)\n    }\n    Vue.prototype._render = function () {\n        const vm = this;\n        const { render } = vm.$options;\n       return render.call(vm)\n    }\n}","import { mergeOptions } from '../utils/index'\nexport function initMixin(Vue) {\n    Vue.mixin = function (mixin) {\n        this.options = mergeOptions(this.options, mixin)\n        console.log(this.options)\n    }\n}","export const ASSETS_TYPE = [\n    'component',\n    'directive',\n    'filter'\n]","import { ASSETS_TYPE } from '../utils/const'\nexport function initAssetsRegisters(Vue) {\n    ASSETS_TYPE.forEach(type => {\n        Vue[type] = function (id, definition) {\n            console.log(id, definition)\n            switch (type) {\n                case 'component':\n                  definition = this.options._base.extend(definition)\n                    break;\n                case 'directive':\n                    break;\n                case 'filter':\n                    break;\n            }\n            this.options[type+'s'][id] = definition\n        }\n    })\n}","import {mergeOptions} from '../utils/index'\nexport function initExtend(Vue) {\n    let cid = 0;\n    Vue.extend = function (extendOptions) {\n        let Sub = function VueComponent(options) {\n            this._init(options)\n        }\n        Sub.prototype = Object.create(this.prototype)\n        Sub.prototype.constructor = Sub\n        Sub.id = cid++\n        mergeOptions(this.options,extendOptions)\n        return Sub\n    }\n}","\nimport { initMixin } from './initMixin'\nimport { ASSETS_TYPE } from '../utils/const'\nimport { initAssetsRegisters } from './assets'\nimport {initExtend} from './extend'\nexport function initOptionsAPI(Vue) {\n    Vue.options = {}\n    Vue.options._base = Vue\n    initMixin(Vue)\n    ASSETS_TYPE.forEach(type => {\n        Vue.options[type+'s'] ={} \n    })\n    initExtend(Vue)\n    initAssetsRegisters(Vue)\n}","/**\n * vue 核心代码\n */\nimport { initMixin } from './init'\nimport { renderMixin } from './render'\nimport { lifecycleMixin } from './lifecycle'\nimport {initOptionsAPI} from './initOptionsAPI/index'\nclass Vue{\n    constructor(options) {\n        this._init(options)\n        if (options.el) {\n            this.$mount(options.el)\n        }\n    }\n}\ninitMixin(Vue)\nrenderMixin(Vue)\nlifecycleMixin(Vue)\ninitOptionsAPI(Vue)\nexport default Vue"],"names":["isObject","data","def","key","value","Object","defineProperty","enumerable","configurable","proxy","vm","source","get","set","newVal","mergeHook","parentVal","childVal","concat","LIFECYCLE_HOOKS","strats","forEach","hook","components","mergeAssets","res","create","mergeOptions","parent","child","options","merge","undefined","isRealTag","tagName","tagConfig","includes","oldArrayPrototype","Array","prototype","arrayMethods","METHODS","method","args","result","call","insertData","ob","__ob__","slice","observeArray","dep","notify","id","Dep","subs","watcher","push","target","addDep","update","stack","pushTarget","popTarget","pop","length","Observe","isArray","__proto__","walk","i","observe","keys","defineReactive","childOB","depend","arrayDep","newValue","current","initState","$options","props","methods","initData","computed","watch","_data","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","root","TAG_TYPE","TEXT_TYPE","currentParent","createAstElement","attrs","tag","children","nodeType","end","element","Error","chars","text","replace","start","parseHtml","html","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","defaultTagRE","genProps","str","obj","split","item","styleName","classKey","replaceKey","toLocaleUpperCase","JSON","stringify","genChildren","el","map","c","gen","join","generate","lastIndex","tokens","index","exec","trim","compilationToRender","template","renderData","renderFn","Function","callTicks","waiting","flushQueue","cb","nextTick","setTimeout","queue","has","run","queueWatcher","Watcher","getter","depIds","Set","deps","add","console","log","addSub","patch","oldVnode","vnode","isRealNode","oldElm","parentElm","parentNode","createElm","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","appendChild","createTextNode","propsData","className","style","setAttribute","mountComponent","$el","callHook","updateComponent","_update","_render","lifecycleMixin","Vue","handlers","initMixin","_init","constructor","$mount","querySelector","render","outerHTML","$nextTick","vNode","Ctor","createComponent","_base","extend","componentOptions","renderMixin","_c","arguments","_v","_s","val","mixin","ASSETS_TYPE","initAssetsRegisters","type","definition","initExtend","cid","extendOptions","Sub","VueComponent","initOptionsAPI"],"mappings":"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"}