{"version":3,"file":"vue.js","sources":["../../src/utils/index.js","../../src/observe/observeArray.js","../../src/observe/index.js","../../src/state.js","../../src/complier/parser-html.js","../../src/complier/index.js","../../src/observe/watcher.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/create-element.js","../../src/render.js","../../src/index.js"],"sourcesContent":["//判断是否数组\nexport function isObject(data) {\n    return typeof data === 'object' && data !==null\n}\nexport function def(data, key, value) {\n    Object.defineProperty(data, key, {\n        enumerable: false,\n        configurable: false,\n        value\n    })\n}\nexport function proxy(vm,source,key) {\n    Object.defineProperty(vm, key, {\n        get() {\n            return vm[source][key]\n        },\n        set(newVal) {\n            vm[source][key] = newVal\n        }\n    })\n}","let oldArrayPrototype = Array.prototype;\nexport let arrayMethods = Object.create(oldArrayPrototype)\nconst METHODS = [\n    'push',\n    'splice',\n    'unshift',\n    'pop',\n    'shift',\n    'reverse',\n    'sort'\n]\nMETHODS.forEach(method => {\n    arrayMethods[method] = function (...args) {\n        oldArrayPrototype[method].call(this, ...args);\n        let insertData;\n        let ob = this.__ob__\n        switch (method) {\n            case 'push':\n            case 'unshift':\n                insertData = args\n                break;\n            case 'splice':\n                insertData = args.slice(2)\n                break;\n        }\n        if(insertData) ob.observeArray(insertData)\n    }\n})","/**\n * 观测数据\n * @param {*}data \n */\nimport { isObject, def } from '../utils/index'\nimport {arrayMethods} from './observeArray'\nclass Observe{\n    constructor(value) {\n        if (Array.isArray(value)) {\n            def(value, '__ob__', this)\n            value.__proto__ = arrayMethods\n            this.observeArray(value)\n        } else {\n            this.walk(value)\n        }\n       \n    }\n    observeArray(value) {\n        for (let i = 0; i < value.length; i++){\n            observe(value[i])\n        }\n    }\n    walk(value) {\n        Object.keys(value).forEach(key => {\n            defineReactive(value, key, value[key])\n        })\n    }\n}\nfunction defineReactive(data, key, value) {\n    observe(value)\n    Object.defineProperty(data, key, {\n        get() {\n            return value\n        },\n        set(newValue) {\n            if (newValue === value) return;\n            observe(newValue)\n            value = newValue\n        }\n    })\n}\nexport function observe(data) {\n    if (!isObject(data)) return\n    new Observe(data)\n}","import { observe } from './observe/index'\nimport {proxy} from './utils/index'\nexport function initState(vm) {\n    if (vm.$options.props) {\n        initProps(vm)\n    }\n    if (vm.$options.methods) {\n        initMethods(vm)\n    }\n    if (vm.$options.data) {\n        initData(vm)\n    }\n    if (vm.$options.computed) {\n        initComputed(vm)\n    }\n    if (vm.$options.watch) {\n        initWatch(vm)\n    }\n}\nfunction initProps(vm) {\n\n}\nfunction initMethods(vm) {\n\n}\nfunction initData(vm) {\n    let data = vm.$options.data;\n    data = vm._data = typeof data === 'function' ? data.call(vm) : data\n    for (let key in data) {\n        proxy(vm,'_data',key)\n    }\n    observe(data)\n}\nfunction initComputed(vm) { }\nfunction initWatch(vm) { }\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\nconst startTagClose = /^\\s*(\\/?)>/;\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\nlet root = null;\nconst stack = [];\nconst TAG_TYPE = 1;\nconst TEXT_TYPE = 3;\nlet currentParent;\nfunction createAstElement(tagName, attrs) {\n    return {\n        tag:tagName,\n        parent: null,\n        children: [],\n        attrs,\n        nodeType:TAG_TYPE\n    }\n}\nfunction end(tagName) {\n    let element = stack.pop()\n    if (element.tag !== tagName) {\n        throw new Error('html error')\n    }\n    currentParent = stack[stack.length - 1]\n    if (currentParent) {\n        currentParent.children.push(element)\n        element.parent = currentParent.tag\n    }\n}\nfunction chars(text) {\n    text = text.replace(/\\s/g,'')\n    let element = {\n        nodeType: TEXT_TYPE,\n        text\n    }\n    if (text && currentParent) {\n       currentParent.children.push(element) \n    }\n}\nfunction start(tagName, attrs) {\n    const element = createAstElement(tagName,attrs)\n    if (!root) {\n        root = element\n    }\n    currentParent = element\n    stack.push(element)\n}\nexport function parseHtml(html) {\n    while (html) {\n        let textEnd = html.indexOf('<')\n        if (textEnd === 0) {\n            let startTagMatch = parseStartTag()\n            if (startTagMatch) {\n                start(startTagMatch.tagName,startTagMatch.attrs)\n            continue\n            }\n            let endTagMatch = html.match(endTag)\n            if (endTagMatch) {\n                advance(endTagMatch[0].length)\n                end(endTagMatch[1])\n                continue\n            }\n        }\n        let text;\n        if (textEnd >= 0) {\n            text = html.substring(0, textEnd)\n        }\n        if (text) {\n            advance(text.length) \n            chars(text)\n        }\n    }\n    function advance(n) {\n        html = html.substring(n)\n    }\n    function parseStartTag() {\n        let start = html.match(startTagOpen);\n        if (start) {\n            const match = {\n                tagName: start[1],\n                attrs:[]\n            }\n            advance(start[0].length)\n          \n            let end, attr;\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n                match.attrs.push({\n                    name: attr[1],\n                    value:attr[3] || attr[4] || attr[5]\n                })\n                advance(attr[0].length)\n            }\n            if (end) {\n                advance(end[0].length)\n            }\n            return match\n        }\n    }\n    return root\n}","import { parseHtml } from './parser-html'\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\nfunction genProps(attrs) {\n    let str = '';\n    for (let i = 0; i < attrs.length; i++){\n        if (attrs[i].name === 'style') {\n            let obj = {};\n            attrs[i].value.split(';').forEach(item=>{\n                let [key, value] = item.split(':');\n                let styleName;\n                if (key.includes('-')) {\n                    const [classKey,name] = key.split('-')\n                    let replaceKey = name.substring(0, 1).toLocaleUpperCase()\n                    styleName = classKey + replaceKey+name.slice(1)\n                } else {\n                    styleName = key\n                }\n                obj[styleName] = value\n            });\n            attrs[i].value  = obj\n        } \n        str +=`${attrs[i].name}:${JSON.stringify(attrs[i].value)},`   \n    }\n   return `{${str.slice(0,-1)}}`\n}\nfunction genChildren(el) {\n    let children = el.children\n    if (children && children.length) {\n       return `${children.map(c => \n            gen(c)\n        ).join(',')}`\n    } else {\n        return false\n    }\n}\nfunction generate(el) {\n    return `_c(\"${el.tag}\",${el.attrs.length?genProps(el.attrs):'undefined'},${genChildren(el)})`\n}\nfunction gen(el) {\n    if (el.nodeType === 1) {\n       return generate(el)\n    } else {\n        let lastIndex = defaultTagRE.lastIndex = 0\n        let tokens = []\n        let match, index;\n        let text = el.text\n        while (match = defaultTagRE.exec(text)) {\n             index = match.index;\n            if (index > lastIndex) {\n                tokens.push(JSON.stringify(text.slice(lastIndex,index)))\n            }\n            tokens.push(`_s(${match[1].trim()})`)\n            lastIndex = index + match[0].length\n        }\n        if (lastIndex<text.length) {\n            tokens.push(JSON.stringify(text.slice(lastIndex)))\n        }\n        return `_v(${tokens.join('+')})`\n   }\n}\nexport function compilationToRender(template) {\n    let root = parseHtml(template)\n    let renderData = generate(root)\n    let renderFn = new Function(`with(this){return ${renderData}}`)\n    return renderFn\n}","class Watcher{\n    constructor(vm,getter,cb,options) {\n        this.vm = vm;\n        this.getter = getter;\n        this.cb = cb;\n        this.options = options\n        this.get();\n    }\n    get() {\n        this.getter()\n    }\n}\nexport default Watcher","export function patch(oldVnode,vnode) {\n    const isRealNode = oldVnode.nodeType\n    if (isRealNode) {\n        const oldElm = oldVnode;\n        const parentElm = oldVnode.parentNode;\n        let el = createElm(vnode);\n        parentElm.insertBefore(el, oldElm.nextSibling)\n        parentElm.removeChild(oldElm)\n    }\n}\nfunction createElm(vnode){\n    let { tag, data, children, key, text } = vnode\n    if (typeof tag === 'string') {\n        vnode.el = document.createElement(tag);\n        updateProperties(vnode)\n        children.forEach(child => {\n            return vnode.el.appendChild(createElm(child))\n        });\n    } else {\n        //虚拟dom映射真实dom\n       vnode.el = document.createTextNode(text)\n    }\n    return vnode.el;\n}\nfunction updateProperties(vnode) {\n    let propsData = vnode.data;\n    let el = vnode.el;\n    for (let key in propsData) {\n        if (key === 'class') {\n            el.className = propsData[key]\n        } else if (key === 'style') {\n            for (let styleName in propsData[key]) {\n                el.style[styleName] = propsData[key][styleName]\n            }\n            console.log(el.style)\n        } else {\n            el.setAttribute(key,propsData[key])\n        }\n    }\n}\n","import Watcher from './observe/watcher'\nimport {patch} from './vdom/patch'\nexport function mountComponent(vm, el) {\n    const options = vm.$options;\n    vm.$el = el;\n    let updateComponent = () => {\n        vm._update(vm._render())\n    }\n    new Watcher(vm,updateComponent,()=>{},true)\n}\nexport function lifecycleMixin(Vue) {\n    Vue.prototype._update = function (vnode) {\n        const vm = this;\n        vm.$el = patch(vm.$el,vnode)//虚拟节点创建出真实节点替换掉原有$el\n    }\n}","import { initState } from './state'\nimport { compilationToRender } from './complier/index'\nimport {mountComponent} from './lifecycle.js'\nexport function initMixin(Vue) {\n    Vue.prototype._init = function (options) {\n        const vm = this\n        vm.$options = options\n        initState(vm)\n    }\n    Vue.prototype.$mount = function (el) {\n        const vm = this;\n        const options = vm.$options;\n        el = document.querySelector(el)\n        if (!options.render) {\n            let template = options.template\n            if (!template && el) {\n                template = el.outerHTML;\n                let render = compilationToRender(template)\n                options.render = render\n            }\n        }\n        mountComponent(vm,el)\n    }\n}","export function createElement(tag,data={},...children) {\n    let key = data.key\n    if (key) {\n        delete data.key\n    }\n    return vNode(tag,data,key,children,undefined)\n}\nexport function createTextNode(text) {\n    return vNode(undefined,undefined,undefined,undefined,text)\n}\nfunction vNode(tag,data,key,children,text) {\n    return {\n        tag,\n        data,\n        key,\n        children,\n        text\n    }\n}","import {createElement,createTextNode} from './vdom/create-element'\nexport function renderMixin(Vue) {\n    Vue.prototype._c = function () {\n        return createElement(...arguments)\n    }\n    Vue.prototype._v = function (text) {\n        return createTextNode(text)\n    }\n    Vue.prototype._s = function (val) {\n        return val === null?'':(typeof val === 'object'?JSON.stringify(val):val)\n    }\n    Vue.prototype._render = function () {\n        const vm = this;\n        const { render } = vm.$options;\n       return render.call(vm)\n    }\n}","/**\n * vue 核心代码\n */\nimport { initMixin } from './init'\nimport { renderMixin } from './render'\nimport {lifecycleMixin} from './lifecycle'\nclass Vue{\n    constructor(options) {\n        this._init(options)\n        if (options.el) {\n            this.$mount(options.el)\n        }\n    }\n}\ninitMixin(Vue)\nrenderMixin(Vue)\nlifecycleMixin(Vue)\nexport default Vue"],"names":["isObject","data","def","key","value","Object","defineProperty","enumerable","configurable","proxy","vm","source","get","set","newVal","oldArrayPrototype","Array","prototype","arrayMethods","create","METHODS","forEach","method","args","call","insertData","ob","__ob__","slice","observeArray","Observe","isArray","__proto__","walk","i","length","observe","keys","defineReactive","newValue","initState","$options","props","methods","initData","computed","watch","_data","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","root","stack","TAG_TYPE","TEXT_TYPE","currentParent","createAstElement","tagName","attrs","tag","parent","children","nodeType","end","element","pop","Error","push","chars","text","replace","start","parseHtml","html","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","defaultTagRE","genProps","str","obj","split","item","styleName","includes","classKey","replaceKey","toLocaleUpperCase","JSON","stringify","genChildren","el","map","c","gen","join","generate","lastIndex","tokens","index","exec","trim","compilationToRender","template","renderData","renderFn","Function","Watcher","getter","cb","options","patch","oldVnode","vnode","isRealNode","oldElm","parentElm","parentNode","createElm","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","child","appendChild","createTextNode","propsData","className","style","console","log","setAttribute","mountComponent","$el","updateComponent","_update","_render","lifecycleMixin","Vue","initMixin","_init","$mount","querySelector","render","outerHTML","vNode","undefined","renderMixin","_c","arguments","_v","_s","val"],"mappings":"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"}