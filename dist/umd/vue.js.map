{"version":3,"file":"vue.js","sources":["../../src/utils/index.js","../../src/observe/observeArray.js","../../src/observe/index.js","../../src/state.js","../../src/complier/parser-html.js","../../src/complier/index.js","../../src/init.js","../../src/index.js"],"sourcesContent":["//判断是否数组\nexport function isObject(data) {\n    return typeof data === 'object' && data !==null\n}\nexport function def(data, key, value) {\n    Object.defineProperty(data, key, {\n        enumerable: false,\n        configurable: false,\n        value\n    })\n}","let oldArrayPrototype = Array.prototype;\nexport let arrayMethods = Object.create(oldArrayPrototype)\nconst METHODS = [\n    'push',\n    'splice',\n    'unshift',\n    'pop',\n    'shift',\n    'reverse',\n    'sort'\n]\nMETHODS.forEach(method => {\n    arrayMethods[method] = function (...args) {\n        oldArrayPrototype[method].call(this, ...args);\n        let insertData;\n        let ob = this.__ob__\n        switch (method) {\n            case 'push':\n            case 'unshift':\n                insertData = args\n                break;\n            case 'splice':\n                insertData = args.slice(2)\n                break;\n        }\n        if(insertData) ob.observeArray(insertData)\n    }\n})","/**\n * 观测数据\n * @param {data} \n */\nimport { isObject, def } from '../utils/index'\nimport {arrayMethods} from './observeArray'\nclass Observe{\n    constructor(value) {\n        console.log(value)\n        if (Array.isArray(value)) {\n            def(value, '__ob__', this)\n            value.__proto__ = arrayMethods\n            this.observeArray(value)\n        } else {\n            this.walk(value)\n        }\n       \n    }\n    observeArray(value) {\n        for (let i = 0; i < value.length; i++){\n            observe(value[i])\n        }\n    }\n    walk(value) {\n        Object.keys(value).forEach(key => {\n            defineReactive(value, key, value[key])\n        })\n    }\n}\nfunction defineReactive(data, key, value) {\n    observe(value)\n    Object.defineProperty(data, key, {\n        get() {\n            return value\n        },\n        set(newValue) {\n            if (newValue === value) return;\n            observe(newValue)\n            value = newValue\n        }\n    })\n}\nexport function observe(data) {\n    if (!isObject(data)) return\n    new Observe(data)\n}","import { observe } from './observe/index'\nexport function initState(vm) {\n    if (vm.$options.props) {\n        initProps(vm)\n    }\n    if (vm.$options.methods) {\n        initMethods(vm)\n    }\n    if (vm.$options.data) {\n        initData(vm)\n    }\n    if (vm.$options.computed) {\n        initComputed(vm)\n    }\n    if (vm.$options.watch) {\n        initWatch(vm)\n    }\n}\nfunction initProps(vm) {\n\n}\nfunction initMethods(vm) {\n\n}\nfunction initData(vm) {\n    let data = vm.$options.data;\n    data = vm._data = typeof data === 'function' ? data.call(vm) : data\n    observe(data)\n}\nfunction initComputed(vm) { }\nfunction initWatch(vm) { }\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\nconst startTagClose = /^\\s*(\\/?)>/;\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\nlet root = null;\nconst stack = [];\nconst TAG_TYPE = 1;\nconst TEXT_TYPE = 3;\nlet currentParent;\nfunction createAstElement(tagName, attrs) {\n    return {\n        tag:tagName,\n        parent: null,\n        children: [],\n        attrs,\n        nodeType:TAG_TYPE\n    }\n}\nfunction end(tagName) {\n    let element = stack.pop()\n    if (element.tag !== tagName) {\n        throw new Error('html error')\n    }\n    currentParent = stack[stack.length - 1]\n    if (currentParent) {\n        currentParent.children.push(element)\n        element.parent = currentParent.tag\n    }\n}\nfunction chars(text) {\n    text = text.replace(/\\s/g,'')\n    let element = {\n        nodeType: TEXT_TYPE,\n        text\n    }\n    if (text && currentParent) {\n       currentParent.children.push(element) \n    }\n}\nfunction start(tagName, attrs) {\n    const element = createAstElement(tagName,attrs)\n    if (!root) {\n        root = element\n    }\n    currentParent = element\n    stack.push(element)\n}\nexport function parseHtml(html) {\n    while (html) {\n        let textEnd = html.indexOf('<')\n        if (textEnd === 0) {\n            let startTagMatch = parseStartTag()\n            if (startTagMatch) {\n                start(startTagMatch.tagName,startTagMatch.attrs)\n            continue\n            }\n            let endTagMatch = html.match(endTag)\n            if (endTagMatch) {\n                advance(endTagMatch[0].length)\n                end(endTagMatch[1])\n                continue\n            }\n        }\n        let text;\n        if (textEnd >= 0) {\n            text = html.substring(0, textEnd)\n        }\n        if (text) {\n            advance(text.length) \n            chars(text)\n        }\n    }\n    function advance(n) {\n        html = html.substring(n)\n    }\n    function parseStartTag() {\n        let start = html.match(startTagOpen);\n        if (start) {\n            const match = {\n                tagName: start[1],\n                attrs:[]\n            }\n            advance(start[0].length)\n          \n            let end, attr;\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n                match.attrs.push({\n                    name: attr[1],\n                    value:attr[3] || attr[4] || attr[5]\n                })\n                advance(attr[0].length)\n            }\n            if (end) {\n                advance(end[0].length)\n            }\n            return match\n        }\n    }\n    return root\n}","import { parseHtml } from './parser-html'\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\nfunction genProps(attrs) {\n    let str = '';\n    for (let i = 0; i < attrs.length; i++){\n        if (attrs[i].name === 'style') {\n            let value = attrs[i].value\n            value = value.replace(/\\;/g, ',')\n            str += `${attrs[i].name}:{${value.slice(0,-1)}},`\n        } else {\n        str +=`${attrs[i].name}:${attrs[i].value},`   \n        }\n    }\n   return `{${str.slice(0,-1)}}`\n}\nfunction genChildren(el) {\n    console.log(el)\n    let children = el.children\n    if (children && children.length) {\n       return `${children.map(c => \n            gen(c)\n        ).join(',')}`\n    } else {\n        return false\n    }\n}\nfunction generate(el) {\n    return `_c(\"${el.tag}\",${el.attrs.length?genProps(el.attrs):'undefined'},${genChildren(el)})`\n}\nfunction gen(el) {\n    if (el.nodeType === 1) {\n       return generate(el)\n    } else {\n        console.log()\n        let lastIndex = defaultTagRE.lastIndex = 0\n        let tokens = []\n        let match, index;\n        let text = el.text\n        while (match = defaultTagRE.exec(text)) {\n            console.log(match)\n            let index = match.index;\n            if (index > lastIndex) {\n                tokens.push(JSON.stringify(text.slice(lastIndex,index)))\n            }\n            tokens.push(`_s(${match[1].trim()})`)\n            lastIndex = index + match[0].length\n        }\n        if (lastIndex<text.length) {\n            tokens.push(JSON.stringify(text.slice(lastIndex)))\n        }\n        return `_v(${tokens.join('+')})`\n   }\n}\nexport function compilationToRender(template) {\n    let root = parseHtml(template)\n    let renderData = generate(root)\n    let renderFn = new Function(`with(this){${renderData}}`)\n    return renderFn\n}","import { initState } from './state'\nimport {compilationToRender} from './complier/index'\nexport function initMixin(Vue) {\n    Vue.prototype._init = function (options) {\n        const vm = this\n        vm.$options = options\n        initState(vm)\n    }\n    Vue.prototype.$mount = function (el) {\n        const vm = this;\n        const options = vm.$options;\n        el = document.querySelector(el)\n        if (!options.render) {\n            let template = options.template\n            if (!template && el) {\n                template = el.outerHTML;\n                let render = compilationToRender(template)\n                console.log(render)\n            }\n        }\n    }\n}","/**\n * vue 核心代码\n */\nimport {initMixin} from './init'\nclass Vue{\n    constructor(options) {\n        this._init(options)\n        if (options.el) {\n            this.$mount(options.el)\n        }\n    }\n}\ninitMixin(Vue)\n\nexport default Vue"],"names":["isObject","data","def","key","value","Object","defineProperty","enumerable","configurable","oldArrayPrototype","Array","prototype","arrayMethods","create","METHODS","forEach","method","args","call","insertData","ob","__ob__","slice","observeArray","Observe","console","log","isArray","__proto__","walk","i","length","observe","keys","defineReactive","get","set","newValue","initState","vm","$options","props","methods","initData","computed","watch","_data","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","root","stack","TAG_TYPE","TEXT_TYPE","currentParent","createAstElement","tagName","attrs","tag","parent","children","nodeType","end","element","pop","Error","push","chars","text","replace","start","parseHtml","html","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","defaultTagRE","genProps","str","genChildren","el","map","c","gen","join","generate","lastIndex","tokens","exec","index","JSON","stringify","trim","compilationToRender","template","renderData","renderFn","Function","initMixin","Vue","_init","options","$mount","document","querySelector","render","outerHTML"],"mappings":"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"}