{"version":3,"file":"vue.js","sources":["../../src/utils/index.js","../../src/observe/observeArray.js","../../src/observe/dep.js","../../src/observe/index.js","../../src/state.js","../../src/complier/parser-html.js","../../src/complier/generate.js","../../src/complier/index.js","../../src/utils/next-tick.js","../../src/observe/schedular.js","../../src/observe/watcher.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/create-element.js","../../src/render.js","../../src/initOptionsAPI/index.js","../../src/index.js"],"sourcesContent":["//判断是否数组\r\nexport function isObject(data) {\r\n    return typeof data === 'object' && data !== null\r\n}\r\nexport function def(data, key, value) {\r\n    Object.defineProperty(data, key, {\r\n        enumerable: false,\r\n        configurable: false,\r\n        value\r\n    })\r\n}\r\nexport function proxy(vm, source, key) {\r\n    Object.defineProperty(vm, key, {\r\n        get() {\r\n            return vm[source][key]\r\n        },\r\n        set(newVal) {\r\n            vm[source][key] = newVal\r\n        }\r\n    })\r\n}\r\nfunction mergeHook(parentVal, childVal) {\r\n    if (childVal) {\r\n        if (parentVal) {\r\n            return parentVal.concat(childVal)\r\n        } else {\r\n            return [childVal]\r\n        }\r\n    } else {\r\n        return [parentVal]\r\n    }\r\n}\r\nconst LIFECYCLE_HOOKS = ['beforeCreate', 'created', 'beforeMount', 'Mounted', 'beforeUpdate', 'updated', 'beforeDestroy', 'destroyed']\r\nlet strats = {}\r\nLIFECYCLE_HOOKS.forEach(hook => {\r\n    strats[hook] = mergeHook\r\n})\r\nexport function mergeOptions(parent, child) {\r\n    const options = {}\r\n    for (let key in parent) {\r\n        merge(key)\r\n    }\r\n    for (let key in child) {\r\n        merge(key)\r\n    }\r\n    function merge(key) {\r\n        if (strats[key]) {\r\n            return options[key] = strats[key](parent[key], child[key])\r\n        }\r\n        if (typeof parent[key] === 'object' && typeof child[key] === 'object') {\r\n            options[key] = {\r\n                ...parent[key],\r\n                ...child[key]\r\n            }\r\n        } else if (child[key] === undefined) {\r\n            options[key] = parent[key]\r\n        } else {\r\n            options[key] = child[key]\r\n        }\r\n    }\r\n    return options\r\n}\r\n","let oldArrayPrototype = Array.prototype;\r\nexport let arrayMethods = Object.create(oldArrayPrototype)\r\nconst METHODS = [\r\n    'push',\r\n    'splice',\r\n    'unshift',\r\n    'pop',\r\n    'shift',\r\n    'reverse',\r\n    'sort'\r\n]\r\nMETHODS.forEach(method => {\r\n    arrayMethods[method] = function (...args) {\r\n       const result = oldArrayPrototype[method].call(this, ...args);\r\n        let insertData;\r\n        let ob = this.__ob__\r\n        switch (method) {\r\n            case 'push':\r\n            case 'unshift':\r\n                insertData = args\r\n                break;\r\n            case 'splice':\r\n                insertData = args.slice(2)\r\n                break;\r\n        }\r\n   \r\n        if(insertData) ob.observeArray(insertData)\r\n        ob.dep.notify()\r\n        return result\r\n    }\r\n})","let id = 0;\r\nexport class Dep{\r\n    constructor() {\r\n        this.id = id++\r\n        this.subs = []\r\n    }\r\n    addSub(watcher){\r\n         this.subs.push(watcher)\r\n    }\r\n    depend() {\r\n        Dep.target.addDep(this)\r\n    }\r\n    notify() {\r\n        this.subs.forEach(watcher=>watcher.update())\r\n    }\r\n}\r\nlet stack = []\r\nexport function pushTarget(watcher) {\r\n    Dep.target = watcher;\r\n    stack.push(watcher)\r\n}\r\nexport function popTarget() {\r\n    stack.pop()\r\n    Dep.target = stack[stack.length - 1]\r\n}","/**\r\n * 观测数据\r\n * @param {*}data \r\n */\r\nimport { isObject, def } from '../utils/index'\r\nimport { arrayMethods } from './observeArray'\r\nimport { Dep } from './dep'\r\nclass Observe {\r\n    constructor(value) {\r\n        if (Array.isArray(value)) {\r\n            this.dep = new Dep\r\n            def(value, '__ob__', this)\r\n            value.__proto__ = arrayMethods\r\n            this.observeArray(value)\r\n        } else {\r\n            this.walk(value)\r\n        }\r\n\r\n    }\r\n    observeArray(value) {\r\n        for (let i = 0; i < value.length; i++) {\r\n            observe(value[i])\r\n        }\r\n    }\r\n    walk(value) {\r\n        Object.keys(value).forEach(key => {\r\n            defineReactive(value, key, value[key])\r\n        })\r\n    }\r\n}\r\nfunction defineReactive(data, key, value) {\r\n   let childOB = observe(value)\r\n    const dep = new Dep()\r\n    Object.defineProperty(data, key, {\r\n        get() {\r\n            // console.log('取值', value)\r\n            if (Dep.target) {\r\n                dep.depend()\r\n                if(childOB){\r\n                    childOB.dep.depend()\r\n                    if(Array.isArray(value)){\r\n                        arrayDep(value)\r\n                    }\r\n                }\r\n            }\r\n            return value\r\n        },\r\n        set(newValue) {\r\n            if (newValue === value) return;\r\n            observe(newValue)\r\n            value = newValue\r\n            dep.notify()\r\n        }\r\n    })\r\n}\r\nfunction arrayDep(value){\r\n    for(let i = 0;i<value.length;i++){\r\n        let current = value[i]\r\n        current.__ob__ && current.__ob__.dep.depend()\r\n        if(Array.isArray(current)){\r\n            arrayDep(current)\r\n        }\r\n    }\r\n}\r\nexport function observe(data) {\r\n    if (!isObject(data)) return\r\n    return new Observe(data)\r\n}","import { observe } from './observe/index'\r\nimport {proxy} from './utils/index'\r\nexport function initState(vm) {\r\n    if (vm.$options.props) {\r\n        initProps(vm)\r\n    }\r\n    if (vm.$options.methods) {\r\n        initMethods(vm)\r\n    }\r\n    if (vm.$options.data) {\r\n        initData(vm)\r\n    }\r\n    if (vm.$options.computed) {\r\n        initComputed(vm)\r\n    }\r\n    if (vm.$options.watch) {\r\n        initWatch(vm)\r\n    }\r\n}\r\nfunction initProps(vm) {\r\n\r\n}\r\nfunction initMethods(vm) {\r\n\r\n}\r\nfunction initData(vm) {\r\n    let data = vm.$options.data;\r\n    data = vm._data = typeof data === 'function' ? data.call(vm) : data\r\n    for (let key in data) {\r\n        proxy(vm,'_data',key)\r\n    }\r\n    observe(data)\r\n}\r\nfunction initComputed(vm) { }\r\nfunction initWatch(vm) { }\r\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\nconst startTagClose = /^\\s*(\\/?)>/;\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\r\nlet root = null;\r\nconst stack = [];\r\nconst TAG_TYPE = 1;\r\nconst TEXT_TYPE = 3;\r\nlet currentParent;\r\nfunction createAstElement(tagName, attrs) {\r\n    return {\r\n        tag: tagName,\r\n        parent: null,\r\n        children: [],\r\n        attrs,\r\n        nodeType: TAG_TYPE\r\n    }\r\n}\r\nfunction end(tagName) {\r\n    let element = stack.pop()\r\n    if (element.tag !== tagName) {\r\n        throw new Error('html error')\r\n    }\r\n    currentParent = stack[stack.length - 1]\r\n    if (currentParent) {\r\n        currentParent.children.push(element)\r\n        element.parent = currentParent.tag\r\n    }\r\n}\r\nfunction chars(text) {\r\n    text = text.replace(/\\s/g, '')\r\n    let element = {\r\n        nodeType: TEXT_TYPE,\r\n        text\r\n    }\r\n    if (text && currentParent) {\r\n        currentParent.children.push(element)\r\n    }\r\n}\r\nfunction start(tagName, attrs) {\r\n    const element = createAstElement(tagName, attrs)\r\n    if (!root) {\r\n        root = element\r\n    }\r\n    currentParent = element\r\n    stack.push(element)\r\n}\r\nexport function parseHtml(html) {\r\n    while (html) {\r\n        let textEnd = html.indexOf('<')\r\n        if (textEnd === 0) {\r\n            let startTagMatch = parseStartTag()\r\n            if (startTagMatch) {\r\n                start(startTagMatch.tagName, startTagMatch.attrs)\r\n                continue\r\n            }\r\n            let endTagMatch = html.match(endTag)\r\n            if (endTagMatch) {\r\n                advance(endTagMatch[0].length)\r\n                end(endTagMatch[1])\r\n                continue\r\n            }\r\n        }\r\n        let text;\r\n        if (textEnd >= 0) {\r\n            text = html.substring(0, textEnd)\r\n        }\r\n        if (text) {\r\n            advance(text.length)\r\n            chars(text)\r\n        }\r\n    }\r\n    function advance(n) {\r\n        html = html.substring(n)\r\n    }\r\n    function parseStartTag() {\r\n        let start = html.match(startTagOpen);\r\n        if (start) {\r\n            const match = {\r\n                tagName: start[1],\r\n                attrs: []\r\n            }\r\n            advance(start[0].length)\r\n\r\n            let end, attr;\r\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n                match.attrs.push({\r\n                    name: attr[1],\r\n                    value: attr[3] || attr[4] || attr[5]\r\n                })\r\n                advance(attr[0].length)\r\n            }\r\n            if (end) {\r\n                advance(end[0].length)\r\n            }\r\n            return match\r\n        }\r\n    }\r\n    return root\r\n}","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\r\nfunction genProps(attrs) {\r\n    let str = '';\r\n    for (let i = 0; i < attrs.length; i++){\r\n        if (attrs[i].name === 'style') {\r\n            let obj = {};\r\n            attrs[i].value.split(';').forEach(item=>{\r\n                let [key, value] = item.split(':');\r\n                let styleName;\r\n                if (key.includes('-')) {\r\n                    const [classKey,name] = key.split('-')\r\n                    let replaceKey = name.substring(0, 1).toLocaleUpperCase()\r\n                    styleName = classKey + replaceKey+name.slice(1)\r\n                } else {\r\n                    styleName = key\r\n                }\r\n                obj[styleName] = value\r\n            });\r\n            attrs[i].value  = obj\r\n        } \r\n        str +=`${attrs[i].name}:${JSON.stringify(attrs[i].value)},`   \r\n    }\r\n   return `{${str.slice(0,-1)}}`\r\n}\r\nfunction genChildren(el) {\r\n    let children = el.children\r\n    if (children && children.length) {\r\n       return `${children.map(c => \r\n            gen(c)\r\n        ).join(',')}`\r\n    } else {\r\n        return false\r\n    }\r\n}\r\nexport function generate(el) {\r\n    return `_c(\"${el.tag}\",${el.attrs.length?genProps(el.attrs):'undefined'},${genChildren(el)})`\r\n}\r\nfunction gen(el) {\r\n    if (el.nodeType === 1) {\r\n       return generate(el)\r\n    } else {\r\n        let lastIndex = defaultTagRE.lastIndex = 0\r\n        let tokens = []\r\n        let match, index;\r\n        let text = el.text\r\n        while (match = defaultTagRE.exec(text)) {\r\n             index = match.index;\r\n            if (index > lastIndex) {\r\n                tokens.push(JSON.stringify(text.slice(lastIndex,index)))\r\n            }\r\n            tokens.push(`_s(${match[1].trim()})`)\r\n            lastIndex = index + match[0].length\r\n        }\r\n        if (lastIndex<text.length) {\r\n            tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n        }\r\n        return `_v(${tokens.join('+')})`\r\n   }\r\n}","import { parseHtml } from './parser-html'\r\nimport {generate} from './generate'\r\nexport function compilationToRender(template) {\r\n    let root = parseHtml(template)\r\n    let renderData = generate(root)\r\n    let renderFn = new Function(`with(this){return ${renderData}}`)\r\n    return renderFn\r\n}","const callTicks = []\r\nlet waiting = false\r\nfunction flushQueue(){\r\n    callTicks.forEach(cb=>cb())\r\n    waiting = false\r\n}\r\nexport function nextTick(cb){\r\n    callTicks.push(cb)\r\n    if(!waiting){\r\n        setTimeout(flushQueue,0);\r\n        waiting = true\r\n    }\r\n}","import { nextTick } from '../utils/next-tick'\r\nlet queue = [];\r\nlet has = {};\r\nfunction flushQueue() {\r\n    queue.forEach(item => item.run())\r\n    has = {}\r\n    queue.length = 0;\r\n}\r\nexport function queueWatcher(watcher) {\r\n    const id = watcher.id;\r\n    if (has[id] === undefined) {\r\n        queue.push(watcher);\r\n        has[id] = true;\r\n        nextTick(flushQueue)\r\n    }\r\n}","import {pushTarget,popTarget} from './dep'\r\nimport {queueWatcher} from './schedular'\r\nlet id = 0;\r\nclass Watcher{\r\n    constructor(vm,getter,cb,options) {\r\n        this.vm = vm;\r\n        this.getter = getter;\r\n        this.cb = cb;\r\n        this.id = id++\r\n        this.options = options\r\n        this.depIds = new Set()\r\n        this.deps = []\r\n        this.get();   \r\n    }\r\n    addDep(Dep){\r\n        let id = Dep.id\r\n        if(!this.depIds.has(id)){\r\n            this.depIds.add(id)\r\n            this.deps.push(Dep)\r\n            console.log(id,'watcher')\r\n            Dep.addSub(this)\r\n        }\r\n    }\r\n    get() {\r\n        pushTarget(this)\r\n        this.getter()\r\n        popTarget()\r\n    }\r\n    update() {\r\n        queueWatcher(this)\r\n    }\r\n    run(){\r\n        this.get()\r\n    }\r\n}\r\n\r\nexport default Watcher","export function patch(oldVnode,vnode) {\r\n    const isRealNode = oldVnode.nodeType\r\n    if (isRealNode) {\r\n        const oldElm = oldVnode;\r\n        const parentElm = oldVnode.parentNode;\r\n        let el = createElm(vnode);\r\n        parentElm.insertBefore(el, oldElm.nextSibling)\r\n        parentElm.removeChild(oldElm)\r\n        return el\r\n    }\r\n}\r\nfunction createElm(vnode){\r\n    let { tag, data, children, key, text } = vnode\r\n    if (typeof tag === 'string') {\r\n        vnode.el = document.createElement(tag);\r\n        updateProperties(vnode)\r\n        children.forEach(child => {\r\n            return vnode.el.appendChild(createElm(child))\r\n        });\r\n    } else {\r\n        //虚拟dom映射真实dom\r\n       vnode.el = document.createTextNode(text)\r\n    }\r\n    return vnode.el;\r\n}\r\nfunction updateProperties(vnode) {\r\n    let propsData = vnode.data;\r\n    let el = vnode.el;\r\n    for (let key in propsData) {\r\n        if (key === 'class') {\r\n            el.className = propsData[key]\r\n        } else if (key === 'style') {\r\n            for (let styleName in propsData[key]) {\r\n                el.style[styleName] = propsData[key][styleName]\r\n            }\r\n        } else {\r\n            el.setAttribute(key,propsData[key])\r\n        }\r\n    }\r\n}\r\n","import Watcher from './observe/watcher'\r\nimport {patch} from './vdom/patch'\r\nexport function mountComponent(vm, el) {\r\n    const options = vm.$options;\r\n    vm.$el = el;\r\n    callHook(vm,'beforeMount')\r\n    let updateComponent = () => {\r\n        console.log('update')\r\n        vm._update(vm._render())\r\n    }\r\n    new Watcher(vm, updateComponent, () => { }, true)\r\n    callHook(vm,'mounted')\r\n}\r\nexport function lifecycleMixin(Vue) {\r\n    Vue.prototype._update = function (vnode) {\r\n        const vm = this;\r\n        vm.$el = patch(vm.$el,vnode)//虚拟节点创建出真实节点替换掉原有$el\r\n    }\r\n}\r\nexport function callHook(vm,hook) {\r\n    const handlers = vm.$options[hook];\r\n    if (handlers) {\r\n        for (let i = 0; i < handlers.length; i++){\r\n            handlers[i].call(vm)\r\n        }\r\n    }\r\n}","import { initState } from './state'\r\nimport { compilationToRender } from './complier/index'\r\nimport { mountComponent,callHook } from './lifecycle.js'\r\nimport {mergeOptions} from './utils/index'\r\nimport {nextTick} from './utils/next-tick'\r\nexport function initMixin(Vue) {\r\n    Vue.prototype._init = function (options) {\r\n        const vm = this\r\n        vm.$options = mergeOptions(vm.constructor.options, options)\r\n        callHook(vm,'beforeCreate')\r\n        initState(vm)\r\n        callHook(vm,'created')\r\n    }\r\n    Vue.prototype.$mount = function (el) {\r\n        const vm = this;\r\n        const options = vm.$options;\r\n        el = document.querySelector(el)\r\n        if (!options.render) {\r\n            let template = options.template\r\n            if (!template && el) {\r\n                template = el.outerHTML;\r\n                let render = compilationToRender(template)\r\n                options.render = render\r\n            }\r\n        }\r\n        mountComponent(vm,el)\r\n    }\r\n    Vue.prototype.$nextTick = nextTick\r\n}","export function createElement(tag,data={},...children) {\r\n    let key = data.key\r\n    if (key) {\r\n        delete data.key\r\n    }\r\n    return vNode(tag,data,key,children,undefined)\r\n}\r\nexport function createTextNode(text) {\r\n    return vNode(undefined,undefined,undefined,undefined,text)\r\n}\r\nfunction vNode(tag,data,key,children,text) {\r\n    return {\r\n        tag,\r\n        data,\r\n        key,\r\n        children,\r\n        text\r\n    }\r\n}","import {createElement,createTextNode} from './vdom/create-element'\r\nexport function renderMixin(Vue) {\r\n    Vue.prototype._c = function () {\r\n        return createElement(...arguments)\r\n    }\r\n    Vue.prototype._v = function (text) {\r\n        return createTextNode(text)\r\n    }\r\n    Vue.prototype._s = function (val) {\r\n        return val === null?'':(typeof val === 'object'?JSON.stringify(val):val)\r\n    }\r\n    Vue.prototype._render = function () {\r\n        const vm = this;\r\n        const { render } = vm.$options;\r\n       return render.call(vm)\r\n    }\r\n}","import {mergeOptions} from '../utils/index'\r\nexport function initOptionsAPI(Vue) {\r\n    Vue.options = {}\r\n    Vue.mixin = function (mixin) {\r\n        this.options = mergeOptions(this.options, mixin)\r\n        console.log(this.options)\r\n    }\r\n}","/**\r\n * vue 核心代码\r\n */\r\nimport { initMixin } from './init'\r\nimport { renderMixin } from './render'\r\nimport { lifecycleMixin } from './lifecycle'\r\nimport {initOptionsAPI} from './initOptionsAPI/index'\r\nclass Vue{\r\n    constructor(options) {\r\n        this._init(options)\r\n        if (options.el) {\r\n            this.$mount(options.el)\r\n        }\r\n    }\r\n}\r\ninitMixin(Vue)\r\nrenderMixin(Vue)\r\nlifecycleMixin(Vue)\r\ninitOptionsAPI(Vue)\r\nexport default Vue"],"names":["isObject","data","def","key","value","Object","defineProperty","enumerable","configurable","proxy","vm","source","get","set","newVal","mergeHook","parentVal","childVal","concat","LIFECYCLE_HOOKS","strats","forEach","hook","mergeOptions","parent","child","options","merge","undefined","oldArrayPrototype","Array","prototype","arrayMethods","create","METHODS","method","args","result","call","insertData","ob","__ob__","slice","observeArray","dep","notify","id","Dep","subs","watcher","push","target","addDep","update","stack","pushTarget","popTarget","pop","length","Observe","isArray","__proto__","walk","i","observe","keys","defineReactive","childOB","depend","arrayDep","newValue","current","initState","$options","props","methods","initData","computed","watch","_data","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","root","TAG_TYPE","TEXT_TYPE","currentParent","createAstElement","tagName","attrs","tag","children","nodeType","end","element","Error","chars","text","replace","start","parseHtml","html","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","defaultTagRE","genProps","str","obj","split","item","styleName","includes","classKey","replaceKey","toLocaleUpperCase","JSON","stringify","genChildren","el","map","c","gen","join","generate","lastIndex","tokens","index","exec","trim","compilationToRender","template","renderData","renderFn","Function","callTicks","waiting","flushQueue","cb","nextTick","setTimeout","queue","has","run","queueWatcher","Watcher","getter","depIds","Set","deps","add","console","log","addSub","patch","oldVnode","vnode","isRealNode","oldElm","parentElm","parentNode","createElm","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","appendChild","createTextNode","propsData","className","style","setAttribute","mountComponent","$el","callHook","updateComponent","_update","_render","lifecycleMixin","Vue","handlers","initMixin","_init","constructor","$mount","querySelector","render","outerHTML","$nextTick","vNode","renderMixin","_c","arguments","_v","_s","val","initOptionsAPI","mixin"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA;EACO,SAASA,QAAT,CAAkBC,IAAlB,EAAwB;EAC3B,SAAO,QAAOA,IAAP,MAAgB,QAAhB,IAA4BA,IAAI,KAAK,IAA5C;EACH;EACM,SAASC,GAAT,CAAaD,IAAb,EAAmBE,GAAnB,EAAwBC,KAAxB,EAA+B;EAClCC,EAAAA,MAAM,CAACC,cAAP,CAAsBL,IAAtB,EAA4BE,GAA5B,EAAiC;EAC7BI,IAAAA,UAAU,EAAE,KADiB;EAE7BC,IAAAA,YAAY,EAAE,KAFe;EAG7BJ,IAAAA,KAAK,EAALA;EAH6B,GAAjC;EAKH;EACM,SAASK,KAAT,CAAeC,EAAf,EAAmBC,MAAnB,EAA2BR,GAA3B,EAAgC;EACnCE,EAAAA,MAAM,CAACC,cAAP,CAAsBI,EAAtB,EAA0BP,GAA1B,EAA+B;EAC3BS,IAAAA,GAD2B,iBACrB;EACF,aAAOF,EAAE,CAACC,MAAD,CAAF,CAAWR,GAAX,CAAP;EACH,KAH0B;EAI3BU,IAAAA,GAJ2B,eAIvBC,MAJuB,EAIf;EACRJ,MAAAA,EAAE,CAACC,MAAD,CAAF,CAAWR,GAAX,IAAkBW,MAAlB;EACH;EAN0B,GAA/B;EAQH;;EACD,SAASC,SAAT,CAAmBC,SAAnB,EAA8BC,QAA9B,EAAwC;EACpC,MAAIA,QAAJ,EAAc;EACV,QAAID,SAAJ,EAAe;EACX,aAAOA,SAAS,CAACE,MAAV,CAAiBD,QAAjB,CAAP;EACH,KAFD,MAEO;EACH,aAAO,CAACA,QAAD,CAAP;EACH;EACJ,GAND,MAMO;EACH,WAAO,CAACD,SAAD,CAAP;EACH;EACJ;;EACD,IAAMG,eAAe,GAAG,CAAC,cAAD,EAAiB,SAAjB,EAA4B,aAA5B,EAA2C,SAA3C,EAAsD,cAAtD,EAAsE,SAAtE,EAAiF,eAAjF,EAAkG,WAAlG,CAAxB;EACA,IAAIC,MAAM,GAAG,EAAb;EACAD,eAAe,CAACE,OAAhB,CAAwB,UAAAC,IAAI,EAAI;EAC5BF,EAAAA,MAAM,CAACE,IAAD,CAAN,GAAeP,SAAf;EACH,CAFD;EAGO,SAASQ,YAAT,CAAsBC,MAAtB,EAA8BC,KAA9B,EAAqC;EACxC,MAAMC,OAAO,GAAG,EAAhB;;EACA,OAAK,IAAIvB,GAAT,IAAgBqB,MAAhB,EAAwB;EACpBG,IAAAA,KAAK,CAACxB,GAAD,CAAL;EACH;;EACD,OAAK,IAAIA,IAAT,IAAgBsB,KAAhB,EAAuB;EACnBE,IAAAA,KAAK,CAACxB,IAAD,CAAL;EACH;;EACD,WAASwB,KAAT,CAAexB,GAAf,EAAoB;EAChB,QAAIiB,MAAM,CAACjB,GAAD,CAAV,EAAiB;EACb,aAAOuB,OAAO,CAACvB,GAAD,CAAP,GAAeiB,MAAM,CAACjB,GAAD,CAAN,CAAYqB,MAAM,CAACrB,GAAD,CAAlB,EAAyBsB,KAAK,CAACtB,GAAD,CAA9B,CAAtB;EACH;;EACD,QAAI,QAAOqB,MAAM,CAACrB,GAAD,CAAb,MAAuB,QAAvB,IAAmC,QAAOsB,KAAK,CAACtB,GAAD,CAAZ,MAAsB,QAA7D,EAAuE;EACnEuB,MAAAA,OAAO,CAACvB,GAAD,CAAP,qCACOqB,MAAM,CAACrB,GAAD,CADb,GAEOsB,KAAK,CAACtB,GAAD,CAFZ;EAIH,KALD,MAKO,IAAIsB,KAAK,CAACtB,GAAD,CAAL,KAAeyB,SAAnB,EAA8B;EACjCF,MAAAA,OAAO,CAACvB,GAAD,CAAP,GAAeqB,MAAM,CAACrB,GAAD,CAArB;EACH,KAFM,MAEA;EACHuB,MAAAA,OAAO,CAACvB,GAAD,CAAP,GAAesB,KAAK,CAACtB,GAAD,CAApB;EACH;EACJ;;EACD,SAAOuB,OAAP;EACH;;EC7DD,IAAIG,iBAAiB,GAAGC,KAAK,CAACC,SAA9B;EACO,IAAIC,YAAY,GAAG3B,MAAM,CAAC4B,MAAP,CAAcJ,iBAAd,CAAnB;EACP,IAAMK,OAAO,GAAG,CACZ,MADY,EAEZ,QAFY,EAGZ,SAHY,EAIZ,KAJY,EAKZ,OALY,EAMZ,SANY,EAOZ,MAPY,CAAhB;EASAA,OAAO,CAACb,OAAR,CAAgB,UAAAc,MAAM,EAAI;EACtBH,EAAAA,YAAY,CAACG,MAAD,CAAZ,GAAuB,YAAmB;EAAA;;EAAA,sCAANC,IAAM;EAANA,MAAAA,IAAM;EAAA;;EACvC,QAAMC,MAAM,GAAG,yBAAAR,iBAAiB,CAACM,MAAD,CAAjB,EAA0BG,IAA1B,+BAA+B,IAA/B,SAAwCF,IAAxC,EAAf;;EACC,QAAIG,UAAJ;EACA,QAAIC,EAAE,GAAG,KAAKC,MAAd;;EACA,YAAQN,MAAR;EACI,WAAK,MAAL;EACA,WAAK,SAAL;EACII,QAAAA,UAAU,GAAGH,IAAb;EACA;;EACJ,WAAK,QAAL;EACIG,QAAAA,UAAU,GAAGH,IAAI,CAACM,KAAL,CAAW,CAAX,CAAb;EACA;EAPR;;EAUA,QAAGH,UAAH,EAAeC,EAAE,CAACG,YAAH,CAAgBJ,UAAhB;EACfC,IAAAA,EAAE,CAACI,GAAH,CAAOC,MAAP;EACA,WAAOR,MAAP;EACH,GAjBD;EAkBH,CAnBD;;ECXA,IAAIS,EAAE,GAAG,CAAT;MACaC,GAAb;EACI,iBAAc;EAAA;;EACV,SAAKD,EAAL,GAAUA,EAAE,EAAZ;EACA,SAAKE,IAAL,GAAY,EAAZ;EACH;;EAJL;EAAA;EAAA,2BAKWC,OALX,EAKmB;EACV,WAAKD,IAAL,CAAUE,IAAV,CAAeD,OAAf;EACJ;EAPL;EAAA;EAAA,6BAQa;EACLF,MAAAA,GAAG,CAACI,MAAJ,CAAWC,MAAX,CAAkB,IAAlB;EACH;EAVL;EAAA;EAAA,6BAWa;EACL,WAAKJ,IAAL,CAAU3B,OAAV,CAAkB,UAAA4B,OAAO;EAAA,eAAEA,OAAO,CAACI,MAAR,EAAF;EAAA,OAAzB;EACH;EAbL;;EAAA;EAAA;EAeA,IAAIC,KAAK,GAAG,EAAZ;EACO,SAASC,UAAT,CAAoBN,OAApB,EAA6B;EAChCF,EAAAA,GAAG,CAACI,MAAJ,GAAaF,OAAb;EACAK,EAAAA,KAAK,CAACJ,IAAN,CAAWD,OAAX;EACH;EACM,SAASO,SAAT,GAAqB;EACxBF,EAAAA,KAAK,CAACG,GAAN;EACAV,EAAAA,GAAG,CAACI,MAAJ,GAAaG,KAAK,CAACA,KAAK,CAACI,MAAN,GAAe,CAAhB,CAAlB;EACH;;MCjBKC;EACF,mBAAYvD,KAAZ,EAAmB;EAAA;;EACf,QAAI0B,KAAK,CAAC8B,OAAN,CAAcxD,KAAd,CAAJ,EAA0B;EACtB,WAAKwC,GAAL,GAAW,IAAIG,GAAJ,EAAX;EACA7C,MAAAA,GAAG,CAACE,KAAD,EAAQ,QAAR,EAAkB,IAAlB,CAAH;EACAA,MAAAA,KAAK,CAACyD,SAAN,GAAkB7B,YAAlB;EACA,WAAKW,YAAL,CAAkBvC,KAAlB;EACH,KALD,MAKO;EACH,WAAK0D,IAAL,CAAU1D,KAAV;EACH;EAEJ;;;;mCACYA,OAAO;EAChB,WAAK,IAAI2D,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG3D,KAAK,CAACsD,MAA1B,EAAkCK,CAAC,EAAnC,EAAuC;EACnCC,QAAAA,OAAO,CAAC5D,KAAK,CAAC2D,CAAD,CAAN,CAAP;EACH;EACJ;;;2BACI3D,OAAO;EACRC,MAAAA,MAAM,CAAC4D,IAAP,CAAY7D,KAAZ,EAAmBiB,OAAnB,CAA2B,UAAAlB,GAAG,EAAI;EAC9B+D,QAAAA,cAAc,CAAC9D,KAAD,EAAQD,GAAR,EAAaC,KAAK,CAACD,GAAD,CAAlB,CAAd;EACH,OAFD;EAGH;;;;;;EAEL,SAAS+D,cAAT,CAAwBjE,IAAxB,EAA8BE,GAA9B,EAAmCC,KAAnC,EAA0C;EACvC,MAAI+D,OAAO,GAAGH,OAAO,CAAC5D,KAAD,CAArB;EACC,MAAMwC,GAAG,GAAG,IAAIG,GAAJ,EAAZ;EACA1C,EAAAA,MAAM,CAACC,cAAP,CAAsBL,IAAtB,EAA4BE,GAA5B,EAAiC;EAC7BS,IAAAA,GAD6B,iBACvB;EACF;EACA,UAAImC,GAAG,CAACI,MAAR,EAAgB;EACZP,QAAAA,GAAG,CAACwB,MAAJ;;EACA,YAAGD,OAAH,EAAW;EACPA,UAAAA,OAAO,CAACvB,GAAR,CAAYwB,MAAZ;;EACA,cAAGtC,KAAK,CAAC8B,OAAN,CAAcxD,KAAd,CAAH,EAAwB;EACpBiE,YAAAA,QAAQ,CAACjE,KAAD,CAAR;EACH;EACJ;EACJ;;EACD,aAAOA,KAAP;EACH,KAb4B;EAc7BS,IAAAA,GAd6B,eAczByD,QAdyB,EAcf;EACV,UAAIA,QAAQ,KAAKlE,KAAjB,EAAwB;EACxB4D,MAAAA,OAAO,CAACM,QAAD,CAAP;EACAlE,MAAAA,KAAK,GAAGkE,QAAR;EACA1B,MAAAA,GAAG,CAACC,MAAJ;EACH;EAnB4B,GAAjC;EAqBH;;EACD,SAASwB,QAAT,CAAkBjE,KAAlB,EAAwB;EACpB,OAAI,IAAI2D,CAAC,GAAG,CAAZ,EAAcA,CAAC,GAAC3D,KAAK,CAACsD,MAAtB,EAA6BK,CAAC,EAA9B,EAAiC;EAC7B,QAAIQ,OAAO,GAAGnE,KAAK,CAAC2D,CAAD,CAAnB;EACAQ,IAAAA,OAAO,CAAC9B,MAAR,IAAkB8B,OAAO,CAAC9B,MAAR,CAAeG,GAAf,CAAmBwB,MAAnB,EAAlB;;EACA,QAAGtC,KAAK,CAAC8B,OAAN,CAAcW,OAAd,CAAH,EAA0B;EACtBF,MAAAA,QAAQ,CAACE,OAAD,CAAR;EACH;EACJ;EACJ;;EACM,SAASP,OAAT,CAAiB/D,IAAjB,EAAuB;EAC1B,MAAI,CAACD,QAAQ,CAACC,IAAD,CAAb,EAAqB;EACrB,SAAO,IAAI0D,OAAJ,CAAY1D,IAAZ,CAAP;EACH;;ECjEM,SAASuE,SAAT,CAAmB9D,EAAnB,EAAuB;EAC1B,MAAIA,EAAE,CAAC+D,QAAH,CAAYC,KAAhB,EAAuB;;EAGvB,MAAIhE,EAAE,CAAC+D,QAAH,CAAYE,OAAhB,EAAyB;;EAGzB,MAAIjE,EAAE,CAAC+D,QAAH,CAAYxE,IAAhB,EAAsB;EAClB2E,IAAAA,QAAQ,CAAClE,EAAD,CAAR;EACH;;EACD,MAAIA,EAAE,CAAC+D,QAAH,CAAYI,QAAhB,EAA0B;;EAG1B,MAAInE,EAAE,CAAC+D,QAAH,CAAYK,KAAhB,EAAuB;EAG1B;;EAOD,SAASF,QAAT,CAAkBlE,EAAlB,EAAsB;EAClB,MAAIT,IAAI,GAAGS,EAAE,CAAC+D,QAAH,CAAYxE,IAAvB;EACAA,EAAAA,IAAI,GAAGS,EAAE,CAACqE,KAAH,GAAW,OAAO9E,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAACqC,IAAL,CAAU5B,EAAV,CAA7B,GAA6CT,IAA/D;;EACA,OAAK,IAAIE,GAAT,IAAgBF,IAAhB,EAAsB;EAClBQ,IAAAA,KAAK,CAACC,EAAD,EAAI,OAAJ,EAAYP,GAAZ,CAAL;EACH;;EACD6D,EAAAA,OAAO,CAAC/D,IAAD,CAAP;EACH;;EChCD,IAAM+E,MAAM,iCAAZ;EACA,IAAMC,YAAY,iBAAUD,MAAV,kBAAwBA,MAAxB,MAAlB;EACA,IAAME,YAAY,GAAG,IAAIC,MAAJ,aAAgBF,YAAhB,EAArB;EACA,IAAMG,MAAM,GAAG,IAAID,MAAJ,gBAAmBF,YAAnB,YAAf;EACA,IAAMI,SAAS,GAAG,2EAAlB;EACA,IAAMC,aAAa,GAAG,YAAtB;EAEA,IAAIC,IAAI,GAAG,IAAX;EACA,IAAMjC,OAAK,GAAG,EAAd;EACA,IAAMkC,QAAQ,GAAG,CAAjB;EACA,IAAMC,SAAS,GAAG,CAAlB;EACA,IAAIC,aAAJ;;EACA,SAASC,gBAAT,CAA0BC,OAA1B,EAAmCC,KAAnC,EAA0C;EACtC,SAAO;EACHC,IAAAA,GAAG,EAAEF,OADF;EAEHpE,IAAAA,MAAM,EAAE,IAFL;EAGHuE,IAAAA,QAAQ,EAAE,EAHP;EAIHF,IAAAA,KAAK,EAALA,KAJG;EAKHG,IAAAA,QAAQ,EAAER;EALP,GAAP;EAOH;;EACD,SAASS,GAAT,CAAaL,OAAb,EAAsB;EAClB,MAAIM,OAAO,GAAG5C,OAAK,CAACG,GAAN,EAAd;;EACA,MAAIyC,OAAO,CAACJ,GAAR,KAAgBF,OAApB,EAA6B;EACzB,UAAM,IAAIO,KAAJ,CAAU,YAAV,CAAN;EACH;;EACDT,EAAAA,aAAa,GAAGpC,OAAK,CAACA,OAAK,CAACI,MAAN,GAAe,CAAhB,CAArB;;EACA,MAAIgC,aAAJ,EAAmB;EACfA,IAAAA,aAAa,CAACK,QAAd,CAAuB7C,IAAvB,CAA4BgD,OAA5B;EACAA,IAAAA,OAAO,CAAC1E,MAAR,GAAiBkE,aAAa,CAACI,GAA/B;EACH;EACJ;;EACD,SAASM,KAAT,CAAeC,IAAf,EAAqB;EACjBA,EAAAA,IAAI,GAAGA,IAAI,CAACC,OAAL,CAAa,KAAb,EAAoB,EAApB,CAAP;EACA,MAAIJ,OAAO,GAAG;EACVF,IAAAA,QAAQ,EAAEP,SADA;EAEVY,IAAAA,IAAI,EAAJA;EAFU,GAAd;;EAIA,MAAIA,IAAI,IAAIX,aAAZ,EAA2B;EACvBA,IAAAA,aAAa,CAACK,QAAd,CAAuB7C,IAAvB,CAA4BgD,OAA5B;EACH;EACJ;;EACD,SAASK,KAAT,CAAeX,OAAf,EAAwBC,KAAxB,EAA+B;EAC3B,MAAMK,OAAO,GAAGP,gBAAgB,CAACC,OAAD,EAAUC,KAAV,CAAhC;;EACA,MAAI,CAACN,IAAL,EAAW;EACPA,IAAAA,IAAI,GAAGW,OAAP;EACH;;EACDR,EAAAA,aAAa,GAAGQ,OAAhB;EACA5C,EAAAA,OAAK,CAACJ,IAAN,CAAWgD,OAAX;EACH;;EACM,SAASM,SAAT,CAAmBC,IAAnB,EAAyB;EAC5B,SAAOA,IAAP,EAAa;EACT,QAAIC,OAAO,GAAGD,IAAI,CAACE,OAAL,CAAa,GAAb,CAAd;;EACA,QAAID,OAAO,KAAK,CAAhB,EAAmB;EACf,UAAIE,aAAa,GAAGC,aAAa,EAAjC;;EACA,UAAID,aAAJ,EAAmB;EACfL,QAAAA,KAAK,CAACK,aAAa,CAAChB,OAAf,EAAwBgB,aAAa,CAACf,KAAtC,CAAL;EACA;EACH;;EACD,UAAIiB,WAAW,GAAGL,IAAI,CAACM,KAAL,CAAW3B,MAAX,CAAlB;;EACA,UAAI0B,WAAJ,EAAiB;EACbE,QAAAA,OAAO,CAACF,WAAW,CAAC,CAAD,CAAX,CAAepD,MAAhB,CAAP;EACAuC,QAAAA,GAAG,CAACa,WAAW,CAAC,CAAD,CAAZ,CAAH;EACA;EACH;EACJ;;EACD,QAAIT,IAAI,SAAR;;EACA,QAAIK,OAAO,IAAI,CAAf,EAAkB;EACdL,MAAAA,IAAI,GAAGI,IAAI,CAACQ,SAAL,CAAe,CAAf,EAAkBP,OAAlB,CAAP;EACH;;EACD,QAAIL,IAAJ,EAAU;EACNW,MAAAA,OAAO,CAACX,IAAI,CAAC3C,MAAN,CAAP;EACA0C,MAAAA,KAAK,CAACC,IAAD,CAAL;EACH;EACJ;;EACD,WAASW,OAAT,CAAiBE,CAAjB,EAAoB;EAChBT,IAAAA,IAAI,GAAGA,IAAI,CAACQ,SAAL,CAAeC,CAAf,CAAP;EACH;;EACD,WAASL,aAAT,GAAyB;EACrB,QAAIN,KAAK,GAAGE,IAAI,CAACM,KAAL,CAAW7B,YAAX,CAAZ;;EACA,QAAIqB,KAAJ,EAAW;EACP,UAAMQ,KAAK,GAAG;EACVnB,QAAAA,OAAO,EAAEW,KAAK,CAAC,CAAD,CADJ;EAEVV,QAAAA,KAAK,EAAE;EAFG,OAAd;EAIAmB,MAAAA,OAAO,CAACT,KAAK,CAAC,CAAD,CAAL,CAAS7C,MAAV,CAAP;;EAEA,UAAIuC,IAAJ,EAASkB,IAAT;;EACA,aAAO,EAAElB,IAAG,GAAGQ,IAAI,CAACM,KAAL,CAAWzB,aAAX,CAAR,MAAuC6B,IAAI,GAAGV,IAAI,CAACM,KAAL,CAAW1B,SAAX,CAA9C,CAAP,EAA6E;EACzE0B,QAAAA,KAAK,CAAClB,KAAN,CAAY3C,IAAZ,CAAiB;EACbkE,UAAAA,IAAI,EAAED,IAAI,CAAC,CAAD,CADG;EAEb/G,UAAAA,KAAK,EAAE+G,IAAI,CAAC,CAAD,CAAJ,IAAWA,IAAI,CAAC,CAAD,CAAf,IAAsBA,IAAI,CAAC,CAAD;EAFpB,SAAjB;EAIAH,QAAAA,OAAO,CAACG,IAAI,CAAC,CAAD,CAAJ,CAAQzD,MAAT,CAAP;EACH;;EACD,UAAIuC,IAAJ,EAAS;EACLe,QAAAA,OAAO,CAACf,IAAG,CAAC,CAAD,CAAH,CAAOvC,MAAR,CAAP;EACH;;EACD,aAAOqD,KAAP;EACH;EACJ;;EACD,SAAOxB,IAAP;EACH;;ECtGD,IAAM8B,YAAY,GAAG,0BAArB;;EACA,SAASC,QAAT,CAAkBzB,KAAlB,EAAyB;EACrB,MAAI0B,GAAG,GAAG,EAAV;;EACA,OAAK,IAAIxD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8B,KAAK,CAACnC,MAA1B,EAAkCK,CAAC,EAAnC,EAAsC;EAClC,QAAI8B,KAAK,CAAC9B,CAAD,CAAL,CAASqD,IAAT,KAAkB,OAAtB,EAA+B;EAAA;EAC3B,YAAII,GAAG,GAAG,EAAV;EACA3B,QAAAA,KAAK,CAAC9B,CAAD,CAAL,CAAS3D,KAAT,CAAeqH,KAAf,CAAqB,GAArB,EAA0BpG,OAA1B,CAAkC,UAAAqG,IAAI,EAAE;EAAA,4BACjBA,IAAI,CAACD,KAAL,CAAW,GAAX,CADiB;EAAA;EAAA,cAC/BtH,GAD+B;EAAA,cAC1BC,KAD0B;;EAEpC,cAAIuH,SAAJ;;EACA,cAAIxH,GAAG,CAACyH,QAAJ,CAAa,GAAb,CAAJ,EAAuB;EAAA,6BACKzH,GAAG,CAACsH,KAAJ,CAAU,GAAV,CADL;EAAA;EAAA,gBACZI,QADY;EAAA,gBACHT,IADG;;EAEnB,gBAAIU,UAAU,GAAGV,IAAI,CAACH,SAAL,CAAe,CAAf,EAAkB,CAAlB,EAAqBc,iBAArB,EAAjB;EACAJ,YAAAA,SAAS,GAAGE,QAAQ,GAAGC,UAAX,GAAsBV,IAAI,CAAC1E,KAAL,CAAW,CAAX,CAAlC;EACH,WAJD,MAIO;EACHiF,YAAAA,SAAS,GAAGxH,GAAZ;EACH;;EACDqH,UAAAA,GAAG,CAACG,SAAD,CAAH,GAAiBvH,KAAjB;EACH,SAXD;EAYAyF,QAAAA,KAAK,CAAC9B,CAAD,CAAL,CAAS3D,KAAT,GAAkBoH,GAAlB;EAd2B;EAe9B;;EACDD,IAAAA,GAAG,cAAM1B,KAAK,CAAC9B,CAAD,CAAL,CAASqD,IAAf,cAAuBY,IAAI,CAACC,SAAL,CAAepC,KAAK,CAAC9B,CAAD,CAAL,CAAS3D,KAAxB,CAAvB,MAAH;EACH;;EACF,oBAAWmH,GAAG,CAAC7E,KAAJ,CAAU,CAAV,EAAY,CAAC,CAAb,CAAX;EACF;;EACD,SAASwF,WAAT,CAAqBC,EAArB,EAAyB;EACrB,MAAIpC,QAAQ,GAAGoC,EAAE,CAACpC,QAAlB;;EACA,MAAIA,QAAQ,IAAIA,QAAQ,CAACrC,MAAzB,EAAiC;EAC9B,qBAAUqC,QAAQ,CAACqC,GAAT,CAAa,UAAAC,CAAC;EAAA,aACnBC,GAAG,CAACD,CAAD,CADgB;EAAA,KAAd,EAEPE,IAFO,CAEF,GAFE,CAAV;EAGF,GAJD,MAIO;EACH,WAAO,KAAP;EACH;EACJ;;EACM,SAASC,QAAT,CAAkBL,EAAlB,EAAsB;EACzB,wBAAcA,EAAE,CAACrC,GAAjB,gBAAyBqC,EAAE,CAACtC,KAAH,CAASnC,MAAT,GAAgB4D,QAAQ,CAACa,EAAE,CAACtC,KAAJ,CAAxB,GAAmC,WAA5D,cAA2EqC,WAAW,CAACC,EAAD,CAAtF;EACH;;EACD,SAASG,GAAT,CAAaH,EAAb,EAAiB;EACb,MAAIA,EAAE,CAACnC,QAAH,KAAgB,CAApB,EAAuB;EACpB,WAAOwC,QAAQ,CAACL,EAAD,CAAf;EACF,GAFD,MAEO;EACH,QAAIM,SAAS,GAAGpB,YAAY,CAACoB,SAAb,GAAyB,CAAzC;EACA,QAAIC,MAAM,GAAG,EAAb;EACA,QAAI3B,KAAJ,EAAW4B,KAAX;EACA,QAAItC,IAAI,GAAG8B,EAAE,CAAC9B,IAAd;;EACA,WAAOU,KAAK,GAAGM,YAAY,CAACuB,IAAb,CAAkBvC,IAAlB,CAAf,EAAwC;EACnCsC,MAAAA,KAAK,GAAG5B,KAAK,CAAC4B,KAAd;;EACD,UAAIA,KAAK,GAAGF,SAAZ,EAAuB;EACnBC,QAAAA,MAAM,CAACxF,IAAP,CAAY8E,IAAI,CAACC,SAAL,CAAe5B,IAAI,CAAC3D,KAAL,CAAW+F,SAAX,EAAqBE,KAArB,CAAf,CAAZ;EACH;;EACDD,MAAAA,MAAM,CAACxF,IAAP,cAAkB6D,KAAK,CAAC,CAAD,CAAL,CAAS8B,IAAT,EAAlB;EACAJ,MAAAA,SAAS,GAAGE,KAAK,GAAG5B,KAAK,CAAC,CAAD,CAAL,CAASrD,MAA7B;EACH;;EACD,QAAI+E,SAAS,GAACpC,IAAI,CAAC3C,MAAnB,EAA2B;EACvBgF,MAAAA,MAAM,CAACxF,IAAP,CAAY8E,IAAI,CAACC,SAAL,CAAe5B,IAAI,CAAC3D,KAAL,CAAW+F,SAAX,CAAf,CAAZ;EACH;;EACD,wBAAaC,MAAM,CAACH,IAAP,CAAY,GAAZ,CAAb;EACJ;EACH;;ECxDM,SAASO,mBAAT,CAA6BC,QAA7B,EAAuC;EAC1C,MAAIxD,IAAI,GAAGiB,SAAS,CAACuC,QAAD,CAApB;EACA,MAAIC,UAAU,GAAGR,QAAQ,CAACjD,IAAD,CAAzB;EACA,MAAI0D,QAAQ,GAAG,IAAIC,QAAJ,6BAAkCF,UAAlC,OAAf;EACA,SAAOC,QAAP;EACH;;ECPD,IAAME,SAAS,GAAG,EAAlB;EACA,IAAIC,OAAO,GAAG,KAAd;;EACA,SAASC,UAAT,GAAqB;EACjBF,EAAAA,SAAS,CAAC9H,OAAV,CAAkB,UAAAiI,EAAE;EAAA,WAAEA,EAAE,EAAJ;EAAA,GAApB;EACAF,EAAAA,OAAO,GAAG,KAAV;EACH;;EACM,SAASG,QAAT,CAAkBD,EAAlB,EAAqB;EACxBH,EAAAA,SAAS,CAACjG,IAAV,CAAeoG,EAAf;;EACA,MAAG,CAACF,OAAJ,EAAY;EACRI,IAAAA,UAAU,CAACH,UAAD,EAAY,CAAZ,CAAV;EACAD,IAAAA,OAAO,GAAG,IAAV;EACH;EACJ;;ECXD,IAAIK,KAAK,GAAG,EAAZ;EACA,IAAIC,GAAG,GAAG,EAAV;;EACA,SAASL,YAAT,GAAsB;EAClBI,EAAAA,KAAK,CAACpI,OAAN,CAAc,UAAAqG,IAAI;EAAA,WAAIA,IAAI,CAACiC,GAAL,EAAJ;EAAA,GAAlB;EACAD,EAAAA,GAAG,GAAG,EAAN;EACAD,EAAAA,KAAK,CAAC/F,MAAN,GAAe,CAAf;EACH;;EACM,SAASkG,YAAT,CAAsB3G,OAAtB,EAA+B;EAClC,MAAMH,EAAE,GAAGG,OAAO,CAACH,EAAnB;;EACA,MAAI4G,GAAG,CAAC5G,EAAD,CAAH,KAAYlB,SAAhB,EAA2B;EACvB6H,IAAAA,KAAK,CAACvG,IAAN,CAAWD,OAAX;EACAyG,IAAAA,GAAG,CAAC5G,EAAD,CAAH,GAAU,IAAV;EACAyG,IAAAA,QAAQ,CAACF,YAAD,CAAR;EACH;EACJ;;ECbD,IAAIvG,IAAE,GAAG,CAAT;;MACM+G;EACF,mBAAYnJ,EAAZ,EAAeoJ,MAAf,EAAsBR,EAAtB,EAAyB5H,OAAzB,EAAkC;EAAA;;EAC9B,SAAKhB,EAAL,GAAUA,EAAV;EACA,SAAKoJ,MAAL,GAAcA,MAAd;EACA,SAAKR,EAAL,GAAUA,EAAV;EACA,SAAKxG,EAAL,GAAUA,IAAE,EAAZ;EACA,SAAKpB,OAAL,GAAeA,OAAf;EACA,SAAKqI,MAAL,GAAc,IAAIC,GAAJ,EAAd;EACA,SAAKC,IAAL,GAAY,EAAZ;EACA,SAAKrJ,GAAL;EACH;;;;6BACMmC,KAAI;EACP,UAAID,EAAE,GAAGC,GAAG,CAACD,EAAb;;EACA,UAAG,CAAC,KAAKiH,MAAL,CAAYL,GAAZ,CAAgB5G,EAAhB,CAAJ,EAAwB;EACpB,aAAKiH,MAAL,CAAYG,GAAZ,CAAgBpH,EAAhB;EACA,aAAKmH,IAAL,CAAU/G,IAAV,CAAeH,GAAf;EACAoH,QAAAA,OAAO,CAACC,GAAR,CAAYtH,EAAZ,EAAe,SAAf;EACAC,QAAAA,GAAG,CAACsH,MAAJ,CAAW,IAAX;EACH;EACJ;;;4BACK;EACF9G,MAAAA,UAAU,CAAC,IAAD,CAAV;EACA,WAAKuG,MAAL;EACAtG,MAAAA,SAAS;EACZ;;;+BACQ;EACLoG,MAAAA,YAAY,CAAC,IAAD,CAAZ;EACH;;;4BACI;EACD,WAAKhJ,GAAL;EACH;;;;;;ECjCE,SAAS0J,KAAT,CAAeC,QAAf,EAAwBC,KAAxB,EAA+B;EAClC,MAAMC,UAAU,GAAGF,QAAQ,CAACvE,QAA5B;;EACA,MAAIyE,UAAJ,EAAgB;EACZ,QAAMC,MAAM,GAAGH,QAAf;EACA,QAAMI,SAAS,GAAGJ,QAAQ,CAACK,UAA3B;EACA,QAAIzC,EAAE,GAAG0C,SAAS,CAACL,KAAD,CAAlB;EACAG,IAAAA,SAAS,CAACG,YAAV,CAAuB3C,EAAvB,EAA2BuC,MAAM,CAACK,WAAlC;EACAJ,IAAAA,SAAS,CAACK,WAAV,CAAsBN,MAAtB;EACA,WAAOvC,EAAP;EACH;EACJ;;EACD,SAAS0C,SAAT,CAAmBL,KAAnB,EAAyB;EAAA,MACf1E,GADe,GACoB0E,KADpB,CACf1E,GADe;EAAA,MACV7F,IADU,GACoBuK,KADpB,CACVvK,IADU;EAAA,MACJ8F,QADI,GACoByE,KADpB,CACJzE,QADI;EAAA,MACM5F,GADN,GACoBqK,KADpB,CACMrK,GADN;EAAA,MACWkG,IADX,GACoBmE,KADpB,CACWnE,IADX;;EAErB,MAAI,OAAOP,GAAP,KAAe,QAAnB,EAA6B;EACzB0E,IAAAA,KAAK,CAACrC,EAAN,GAAW8C,QAAQ,CAACC,aAAT,CAAuBpF,GAAvB,CAAX;EACAqF,IAAAA,gBAAgB,CAACX,KAAD,CAAhB;EACAzE,IAAAA,QAAQ,CAAC1E,OAAT,CAAiB,UAAAI,KAAK,EAAI;EACtB,aAAO+I,KAAK,CAACrC,EAAN,CAASiD,WAAT,CAAqBP,SAAS,CAACpJ,KAAD,CAA9B,CAAP;EACH,KAFD;EAGH,GAND,MAMO;EACH;EACD+I,IAAAA,KAAK,CAACrC,EAAN,GAAW8C,QAAQ,CAACI,cAAT,CAAwBhF,IAAxB,CAAX;EACF;;EACD,SAAOmE,KAAK,CAACrC,EAAb;EACH;;EACD,SAASgD,gBAAT,CAA0BX,KAA1B,EAAiC;EAC7B,MAAIc,SAAS,GAAGd,KAAK,CAACvK,IAAtB;EACA,MAAIkI,EAAE,GAAGqC,KAAK,CAACrC,EAAf;;EACA,OAAK,IAAIhI,GAAT,IAAgBmL,SAAhB,EAA2B;EACvB,QAAInL,GAAG,KAAK,OAAZ,EAAqB;EACjBgI,MAAAA,EAAE,CAACoD,SAAH,GAAeD,SAAS,CAACnL,GAAD,CAAxB;EACH,KAFD,MAEO,IAAIA,GAAG,KAAK,OAAZ,EAAqB;EACxB,WAAK,IAAIwH,SAAT,IAAsB2D,SAAS,CAACnL,GAAD,CAA/B,EAAsC;EAClCgI,QAAAA,EAAE,CAACqD,KAAH,CAAS7D,SAAT,IAAsB2D,SAAS,CAACnL,GAAD,CAAT,CAAewH,SAAf,CAAtB;EACH;EACJ,KAJM,MAIA;EACHQ,MAAAA,EAAE,CAACsD,YAAH,CAAgBtL,GAAhB,EAAoBmL,SAAS,CAACnL,GAAD,CAA7B;EACH;EACJ;EACJ;;ECrCM,SAASuL,cAAT,CAAwBhL,EAAxB,EAA4ByH,EAA5B,EAAgC;EACnC,MAAMzG,OAAO,GAAGhB,EAAE,CAAC+D,QAAnB;EACA/D,EAAAA,EAAE,CAACiL,GAAH,GAASxD,EAAT;EACAyD,EAAAA,QAAQ,CAAClL,EAAD,EAAI,aAAJ,CAAR;;EACA,MAAImL,eAAe,GAAG,SAAlBA,eAAkB,GAAM;EACxB1B,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;;EACA1J,IAAAA,EAAE,CAACoL,OAAH,CAAWpL,EAAE,CAACqL,OAAH,EAAX;EACH,GAHD;;EAIA,MAAIlC,OAAJ,CAAYnJ,EAAZ,EAAgBmL,eAAhB,EAAiC,YAAM,EAAvC,EAA4C,IAA5C;EACAD,EAAAA,QAAQ,CAAClL,EAAD,EAAI,SAAJ,CAAR;EACH;EACM,SAASsL,cAAT,CAAwBC,GAAxB,EAA6B;EAChCA,EAAAA,GAAG,CAAClK,SAAJ,CAAc+J,OAAd,GAAwB,UAAUtB,KAAV,EAAiB;EACrC,QAAM9J,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACiL,GAAH,GAASrB,KAAK,CAAC5J,EAAE,CAACiL,GAAJ,EAAQnB,KAAR,CAAd,CAFqC;EAGxC,GAHD;EAIH;EACM,SAASoB,QAAT,CAAkBlL,EAAlB,EAAqBY,IAArB,EAA2B;EAC9B,MAAM4K,QAAQ,GAAGxL,EAAE,CAAC+D,QAAH,CAAYnD,IAAZ,CAAjB;;EACA,MAAI4K,QAAJ,EAAc;EACV,SAAK,IAAInI,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmI,QAAQ,CAACxI,MAA7B,EAAqCK,CAAC,EAAtC,EAAyC;EACrCmI,MAAAA,QAAQ,CAACnI,CAAD,CAAR,CAAYzB,IAAZ,CAAiB5B,EAAjB;EACH;EACJ;EACJ;;ECrBM,SAASyL,SAAT,CAAmBF,GAAnB,EAAwB;EAC3BA,EAAAA,GAAG,CAAClK,SAAJ,CAAcqK,KAAd,GAAsB,UAAU1K,OAAV,EAAmB;EACrC,QAAMhB,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAAC+D,QAAH,GAAclD,YAAY,CAACb,EAAE,CAAC2L,WAAH,CAAe3K,OAAhB,EAAyBA,OAAzB,CAA1B;EACAkK,IAAAA,QAAQ,CAAClL,EAAD,EAAI,cAAJ,CAAR;EACA8D,IAAAA,SAAS,CAAC9D,EAAD,CAAT;EACAkL,IAAAA,QAAQ,CAAClL,EAAD,EAAI,SAAJ,CAAR;EACH,GAND;;EAOAuL,EAAAA,GAAG,CAAClK,SAAJ,CAAcuK,MAAd,GAAuB,UAAUnE,EAAV,EAAc;EACjC,QAAMzH,EAAE,GAAG,IAAX;EACA,QAAMgB,OAAO,GAAGhB,EAAE,CAAC+D,QAAnB;EACA0D,IAAAA,EAAE,GAAG8C,QAAQ,CAACsB,aAAT,CAAuBpE,EAAvB,CAAL;;EACA,QAAI,CAACzG,OAAO,CAAC8K,MAAb,EAAqB;EACjB,UAAIzD,QAAQ,GAAGrH,OAAO,CAACqH,QAAvB;;EACA,UAAI,CAACA,QAAD,IAAaZ,EAAjB,EAAqB;EACjBY,QAAAA,QAAQ,GAAGZ,EAAE,CAACsE,SAAd;EACA,YAAID,MAAM,GAAG1D,mBAAmB,CAACC,QAAD,CAAhC;EACArH,QAAAA,OAAO,CAAC8K,MAAR,GAAiBA,MAAjB;EACH;EACJ;;EACDd,IAAAA,cAAc,CAAChL,EAAD,EAAIyH,EAAJ,CAAd;EACH,GAbD;;EAcA8D,EAAAA,GAAG,CAAClK,SAAJ,CAAc2K,SAAd,GAA0BnD,QAA1B;EACH;;EC5BM,SAAS2B,aAAT,CAAuBpF,GAAvB,EAAgD;EAAA,MAArB7F,IAAqB,uEAAhB,EAAgB;EACnD,MAAIE,GAAG,GAAGF,IAAI,CAACE,GAAf;;EACA,MAAIA,GAAJ,EAAS;EACL,WAAOF,IAAI,CAACE,GAAZ;EACH;;EAJkD,oCAAV4F,QAAU;EAAVA,IAAAA,QAAU;EAAA;;EAKnD,SAAO4G,KAAK,CAAC7G,GAAD,EAAK7F,IAAL,EAAUE,GAAV,EAAc4F,QAAd,EAAuBnE,SAAvB,CAAZ;EACH;EACM,SAASyJ,cAAT,CAAwBhF,IAAxB,EAA8B;EACjC,SAAOsG,KAAK,CAAC/K,SAAD,EAAWA,SAAX,EAAqBA,SAArB,EAA+BA,SAA/B,EAAyCyE,IAAzC,CAAZ;EACH;;EACD,SAASsG,KAAT,CAAe7G,GAAf,EAAmB7F,IAAnB,EAAwBE,GAAxB,EAA4B4F,QAA5B,EAAqCM,IAArC,EAA2C;EACvC,SAAO;EACHP,IAAAA,GAAG,EAAHA,GADG;EAEH7F,IAAAA,IAAI,EAAJA,IAFG;EAGHE,IAAAA,GAAG,EAAHA,GAHG;EAIH4F,IAAAA,QAAQ,EAARA,QAJG;EAKHM,IAAAA,IAAI,EAAJA;EALG,GAAP;EAOH;;ECjBM,SAASuG,WAAT,CAAqBX,GAArB,EAA0B;EAC7BA,EAAAA,GAAG,CAAClK,SAAJ,CAAc8K,EAAd,GAAmB,YAAY;EAC3B,WAAO3B,aAAa,MAAb,SAAiB4B,SAAjB,CAAP;EACH,GAFD;;EAGAb,EAAAA,GAAG,CAAClK,SAAJ,CAAcgL,EAAd,GAAmB,UAAU1G,IAAV,EAAgB;EAC/B,WAAOgF,cAAc,CAAChF,IAAD,CAArB;EACH,GAFD;;EAGA4F,EAAAA,GAAG,CAAClK,SAAJ,CAAciL,EAAd,GAAmB,UAAUC,GAAV,EAAe;EAC9B,WAAOA,GAAG,KAAK,IAAR,GAAa,EAAb,GAAiB,QAAOA,GAAP,MAAe,QAAf,GAAwBjF,IAAI,CAACC,SAAL,CAAegF,GAAf,CAAxB,GAA4CA,GAApE;EACH,GAFD;;EAGAhB,EAAAA,GAAG,CAAClK,SAAJ,CAAcgK,OAAd,GAAwB,YAAY;EAChC,QAAMrL,EAAE,GAAG,IAAX;EADgC,QAExB8L,MAFwB,GAEb9L,EAAE,CAAC+D,QAFU,CAExB+H,MAFwB;EAGjC,WAAOA,MAAM,CAAClK,IAAP,CAAY5B,EAAZ,CAAP;EACF,GAJD;EAKH;;ECfM,SAASwM,cAAT,CAAwBjB,GAAxB,EAA6B;EAChCA,EAAAA,GAAG,CAACvK,OAAJ,GAAc,EAAd;;EACAuK,EAAAA,GAAG,CAACkB,KAAJ,GAAY,UAAUA,KAAV,EAAiB;EACzB,SAAKzL,OAAL,GAAeH,YAAY,CAAC,KAAKG,OAAN,EAAeyL,KAAf,CAA3B;EACAhD,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAK1I,OAAjB;EACH,GAHD;EAIH;;MCAKuK,MACF,aAAYvK,OAAZ,EAAqB;EAAA;;EACjB,OAAK0K,KAAL,CAAW1K,OAAX;;EACA,MAAIA,OAAO,CAACyG,EAAZ,EAAgB;EACZ,SAAKmE,MAAL,CAAY5K,OAAO,CAACyG,EAApB;EACH;EACJ;;EAELgE,SAAS,CAACF,GAAD,CAAT;EACAW,WAAW,CAACX,GAAD,CAAX;EACAD,cAAc,CAACC,GAAD,CAAd;EACAiB,cAAc,CAACjB,GAAD,CAAd;;;;;;;;"}